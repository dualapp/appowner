<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="include/templates/template.xhtml">
	<ui:define name="content">
		<h:head>
			<title>InvoiceTemplate Form</title>
			<script src="JavaScript/ModalPopupWindow.js" type="text/javascript"></script>

			<style>
body {
	font-family: Verdana;
	font-size: 10px;
}
</style>
		</h:head>
		<script>

 var modalWin = new CreateModalPopUpObject();
 modalWin.SetLoadingImagePath("images/loading_home.gif");
 modalWin.SetCloseButtonImagePath("images/cross.png");
 //Uncomment below line to make look buttons as link
 //modalWin.SetButtonStyle("background:none;border:none;textDecoration:underline;cursor:pointer");

function ShowNewPage(){
 var callbackFunctionArray = new Array(Submit, Cancel);
 modalWin.ShowURL('createinvoicetemplate.xhtml',470,600,'Create Invoice Template',null,callbackFunctionArray);
 }
function ShowNewPage1(clicked_id){
	 var callbackFunctionArray = new Array(Submit, Cancel);
    modalWin.ShowURL("editinvoicetemplate.xhtml?int_InvoiceTemplateID="+clicked_id+"",400,350,'Edit Invoice Template',null,callbackFunctionArray);
	 }
function ShowNewPage2(clicked_id){
	 var callbackFunctionArray = new Array(Submit, Cancel);
	modalWin.ShowURL("viewinvoicetemplate.xhtml?int_InvoiceTemplateID="+clicked_id+"",400,350,'View Invoice Template',null,callbackFunctionArray);
	 }
function ShowNewPage3(){
	 var callbackFunctionArray = new Array(Submit, Cancel);
	 modalWin.ShowURL('editinvoicetemplate1.xhtml',470,600,'Create Invoice Template',null,callbackFunctionArray);
	 }
function ShowNewPage4(){
	 var callbackFunctionArray = new Array(Submit, Cancel);
	 modalWin.ShowURL('viewinvoicetemplate1.xhtml',470,600,'Create Invoice Template',null,callbackFunctionArray);
	 } 
function ShowNewPage5(){
	 var callbackFunctionArray = new Array(Submit, Cancel);
	 modalWin.ShowURL('deleteinvoice1.xhtml',470,600,'Create Invoice Template',null,callbackFunctionArray);
	 }  
 
function ShowMessage() {
 modalWin.ShowMessage('This Modal Popup Window using Javascript',200,400,'User Information');
 }
  
 function  ShowMessageWithAction(){
    //ShowConfirmationMessage(message, height, width, title,onCloseCallBack, firstButtonText, onFirstButtonClick, secondButtonText, onSecondButtonClick);
    modalWin.ShowConfirmationMessage('This is confirmation window using Javascript',200,400,'User Confirmation',null,'Agree',Action1,'Disagree',Action2);
 }

function ShowMessageNoDragging(){
 modalWin.Draggable=false;
 modalWin.ShowMessage('You can not drag this window',200,400,'User Information');

}

function Action1(){
alert('Action1 is excuted');
modalWin.HideModalPopUp();
}

function Action2(){
alert('Action2 is excuted');
modalWin.HideModalPopUp();
}

function Submit(msg){
modalWin.HideModalPopUp();
modalWin.ShowMessage(msg,200,400,'User Information',null,null);
}

function Cancel(){
modalWin.HideModalPopUp();
modalWin.ShowMessage(msg,200,400,'User Information',null,null);
}

function HideModalWindow() {
    modalWin.HideModalPopUp();
}

</script>
		<body bgcolor="pink">
			<h:form id="form" prependId="false">
				<fieldset>
					<legend>
						<h:commandButton value="Filter"
							style="background-color:#c00; color:#fff;" width="300" />
					</legend>
					<h:panelGroup id="performed">

						<td><h:outputLabel value="Organisation:" /></td>
						<td><p:selectOneMenu id="str_Organisation"
								value="#{templateBean.str_Organisation}" style="width:200px">
								<f:selectItem itemLabel="Select" itemValue=""
									noSelectionOption="true" />
								<f:selectItem itemLabel="#{templateBean.str_Organisation}"
									itemValue="#{templateBean.str_Organisation}" />
							</p:selectOneMenu></td>
              &#150; &#150;&#150; &#150;&#150;
                &#150; &#150;&#150; &#150;&#150;
                <h:commandButton value="Go" />
					</h:panelGroup>

				</fieldset>
				<br />

				<input type="button" style="width: 100px" onclick="ShowNewPage()"
					value="Create New" />&#150; &#150; &#150; &#150;<p:commandButton process="invoice" update=":form:multiInvoiceTemplateDetail1" icon="ui-icon-search" value="View" oncomplete="PF('multiInvoiceTemplateDialog1').show()" />
       &#150; &#150; <p:commandButton process="invoice" update=":form:multiInvoiceTemplateDetail" icon="ui-icon-pencil" value="Edit " oncomplete="PF('multiInvoiceTemplateDialog').show()" />
       &#150; &#150;  <p:commandButton update="invoice" process="invoice" onclick="return confirm('Are you sure you want to delete ?');" action="#{templateBean.deleteInvoiceTemplate()}" icon="ui-icon-trash" value="Delete" />
     &#150;  &#150;<h:commandButton
					value="Refresh" />

				<br />
				<br />

			
				 <p:growl id="msgs" showDetail="true" />
				<p:dataTable id="invoice" var="invoice"
					value="#{templateBean.listInvoices}" binding="#{templateBean.dataTable}" style="width: 100%"  rows="12" paginator="true"  paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} "  rowsPerPageTemplate="10,20,30,40,50" editable="true"  resizableColumns="true"  selection="#{templateBean.selectedInvoiceTemplate}" rowKey="#{invoice.int_InvoiceTemplateID}" >
					<f:facet name="header">
               InvoiceTemplate
               </f:facet>
                 <p:column     exportable="false"  selectionMode="multiple" style="width:35px;text-align:center">
         
             </p:column>
          
					<p:column>
						<f:facet name="header">
							<h:outputText value="Organisation Name" />
						</f:facet>
						<h:outputText value="#{invoice.str_Organisation}"></h:outputText>
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Template Name" />
						</f:facet>
						<h:outputText value="#{invoice.str_InvoiceTemplateName}" />
					</p:column>

					<p:column>
						<f:facet name="header">
							<h:outputText value="Frequency" />
						</f:facet>
						<h:outputText value="#{invoice.str_Frequency}" />
					</p:column>
					<p:column>
						<f:facet name="header">
							<h:outputText value="Action" />
						</f:facet>

						<input type="button" id="#{invoice.int_InvoiceTemplateID}"
							style="width: 50px" onclick="ShowNewPage1(this.id)" value="Edit" />
						<input type="button" id="#{invoice.int_InvoiceTemplateID}"
							style="width: 50px" onclick="ShowNewPage2(this.id)" value="View" />
						<h:link outcome="deleteinvoice.xhtml"
							onclick="return confirm('Are you sure you want to delete #{invoice.int_InvoiceTemplateID}?');">
							<p:graphicImage height="20" width="20" alt="delete"
								value="images/delete.jpg" />
							<f:param name="int_InvoiceTemplateID"
								value="#{invoice.int_InvoiceTemplateID}" />
						</h:link>

					</p:column>
				</p:dataTable>
				  <p:dialog header="Edit InvoiceTemplate" widgetVar="multiInvoiceTemplateDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="300" width="400">
        <p:outputPanel id="multiInvoiceTemplateDetail" style="text-align:center;">
          
           <table>
               
            <ui:repeat value="#{templateBean.selectedInvoiceTemplate}" var="invoiceTemplate1">
             <tr>
 <th>
    <h:outputText value="Invoice Template:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_InvoiceTemplateName}"/></td>
    </tr>
 <tr>
 <th>
    <h:outputText value="Frequency:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_Frequency}"/></td>
    </tr>
    <tr>
    <th>
    <h:outputText value="Message Category:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_MessageCategory}"/></td>
    </tr>
    <tr>
 <th>
    <h:outputText value="Message Template:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_MessageTemplate}"/></td>
    </tr>
   
  
    <tr>
 <th>
    <h:outputText value="Description:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_Description}"/></td>
    </tr>
    
 
    
      
            </ui:repeat>
             <tr><td><h:commandButton value="update" action="#{templateBean.saveInvoiceTemplate(invoiceTemplate1)}"/></td></tr>
            </table>
            
        </p:outputPanel>
    </p:dialog>
    <p:dialog header="View InvoiceTemplate" widgetVar="multiInvoiceTemplateDialog1"     showEffect="explode" hideEffect="bounce" resizable="false" height="200" width="400">
        <p:outputPanel id="multiInvoiceTemplateDetail1" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{templateBean.selectedInvoiceTemplate}" var="invoiceTemplate1">
          <tr>   
               <th>
    <h:outputText value="Invoice Template:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_InvoiceTemplateName}" readonly="true"/></td>
    </tr>
 <tr>
 <th>
    <h:outputText value="Frequency:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_Frequency}" readonly="true"/></td>
    </tr>
    <tr>
    <th>
    <h:outputText value="Message Category:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_MessageCategory}" readonly="true"/></td>
    </tr>
    <tr>
 <th>
    <h:outputText value="Message Template:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_MessageTemplate}" readonly="true"/></td>
    </tr>
   
  
    <tr>
 <th>
    <h:outputText value="Description:"/></th>
    <td>
    <h:inputText value="#{invoiceTemplate1.str_Description}" readonly="true"/></td>
    </tr>
               
                
            </ui:repeat>
            </table>
        </p:outputPanel>
    </p:dialog>
		</h:form>
		</body>
		</ui:define>
		</ui:composition>