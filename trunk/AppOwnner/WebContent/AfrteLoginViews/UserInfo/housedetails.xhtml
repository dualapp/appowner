<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="../../include/templates/template1.xhtml"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
	<ui:define name="content">
	 
<h:head><title>User Registration</title>
 <link rel="stylesheet" type="text/css" href="assets/css/ace.min.css" />
 <style type="text/css">
 .ui-growl {
 position:absolute;
        
         width:400px;
         left:50%;
         top:200px;
         margin-left:-200px; 

}
</style>
 
</h:head>
<body>  
 <h:form id="form"  enctype="multipart/form-data">
 <p:growl id="ui-growl" globalOnly="true" sticky="true" />
 
 <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px;margin-top:5px"  class="src">
		
			<tr>
				<td> 
					<img src="#{expenseBean.str_Name}images/members.png" height="50" width="50"></img> <span class="title">House Details</span>
				</td>
			</tr>
		
	</table>
  
 <div id="page3">
 <div class="gsTitleDiv">Instructions</div>
 <p:panel id="panel"  style="border:none;">
You can make changes by double clicking on the house detail.
Once completed, this setup will take some time. Request you to be patient.
Removing a house may result in a member not associatedto any house. In the next screen, you will be prompted to assign house number to such members.
Unless the Community Setup is complete, the changes that are made will not be saved.
 </p:panel>
  
 
 	    <p:panel id="btnPanel"   process=":form:DT"  update=":form:DT"  style="background:#438eb9;border:2;width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" >
  <p:selectOneButton id="orientation"       styleClass="yourStyleClass" value="#{apartmentDetailsBean.str_BlockName}" valueChangeListener="#{apartmentDetailsBean.blockChangeListener}" >
            
            <f:selectItems  value="#{apartmentDetailsBean.blockNameList}" />
             
           <p:ajax  event="change" immediate="true"
                    update=":form:DT"  />
        </p:selectOneButton> 
 </p:panel>
	     
	        
 <p:dataTable id="DT"    emptyMessage="No house details found with given Block Name"   selection="#{apartmentDetailsBean.selectedHouse}" rowKey="#{houseDetail.int_HouseId}"   style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"    var="houseDetail"  value="#{apartmentDetailsBean.listHouseDetails}">
           
                
	  <p:column     exportable="false"  selectionMode="multiple" style="width:35px;text-align:center">
         
             </p:column>
        
	 <p:column headerText="House No.">
                <h:outputText value="#{houseDetail.str_HouseNo}" /> 
            
	 </p:column>
	 <p:column headerText="House(sqft)">
                <h:outputText value="#{houseDetail.int_HouseSize}" /> 
            
	 </p:column>
	 <p:column headerText="Type Of House">
                <h:outputText value="#{houseDetail.str_TypeOfHouse}" /> 
            
	 </p:column>
	 <p:column headerText=" BathRooms">
                <h:outputText value="#{houseDetail.int_NoOfBathRooms}" /> 
            
	 </p:column>
	  <p:column headerText="Balconies">
                <h:outputText value="#{houseDetail.int_NoOfBalconies}" /> 
            
	 </p:column>
	  <p:column headerText="Rented">
                <h:outputText value="#{houseDetail.is_Rented}" /> 
            
	 </p:column>
	 <p:column headerText="Users">
                <h:outputText value="#{houseDetail.int_NoOfUsers}" /> 
            
	 </p:column>
	 <p:column>
	  <f:facet name="header">
                <center>
                
                    <h:outputText value="Action" />
                    </center>
                </f:facet>
                <center>
	   
                      <h:panelGroup layout="block" id="mainDiv" style="float:center">
               <p:commandLink   process="DT"   immediate="true" execute="@this" update=":form:editHouseDetail" oncomplete="PF('editHouseDialog').show()" action="#{apartmentDetailsBean.getHouseDetails1(houseDetail.int_HouseId)}">
                  <h:graphicImage  height="20" width="20" alt="Edit" value="#{expenseBean.str_Name}images/edit.jpg" title="Edit"/> 
                            </p:commandLink>
               &#150; 
               
               
              <p:commandLink   process="DT"  update=":form:viewHouseDetail" oncomplete="PF('viewHouseDialog').show()" action="#{apartmentDetailsBean.getHouseDetails1(houseDetail.int_HouseId)}">
                  <h:graphicImage  height="20" width="20" alt="View" value="#{expenseBean.str_Name}images/view.jpg" title="View"/> 
              </p:commandLink>
              &#150;
           <h:commandLink process="DT" update=" DT"  immediate="true" execute="@this"
	   		 onclick="return confirm('Are you sure you want to delete #{houseDetail.str_HouseNo}?');" action="#{apartmentDetailsBean.deleteHouseDetails(houseDetail.int_HouseId)}">  
	   			<p:graphicImage  height="20" width="20" alt="delete" value="#{expenseBean.str_Name}images/delete.jpg" title="Delete"/> 
	   				 
	   		</h:commandLink> 
	   		</h:panelGroup>
	   		</center>
            </p:column>
          
	</p:dataTable>
	<h3>Tired of updating House individually</h3>
   <h6> Easily input data for multiple block/houses in one go</h6>
   
	      <table style="overflow:hidden;border:0pt none;width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
	      
	      <tr><td>  
	  
	      &#150; &#150; <p:commandButton style="width:120px;height:25px"  process="DT" update=":form:houseDetail" icon="ui-icon-plus"  value="Create New" oncomplete="PF('houseDialog').show()" /> 
	       &#150; &#150;  <h:commandButton style="width:120px;height:25px"    onclick="return confirm('Are you sure you want to delete ?');" action="#{apartmentDetailsBean.deleteSelectedHouse()}" icon="ui-icon-trash" value="Delete">
	          <f:ajax execute="DT" event="click" update="ui-growl" render="DT"/>
	        </h:commandButton>
	        

	    &#150; &#150;  <p:button  style="width:120px;height:25px"  outcome="blockdetails.xhtml" value="Back"/>
	     
	     </td> </tr>
	   
	    <tr><td>
	   &#150; &#150; <p:commandButton  style="width:120px;height:25px" id="Btn" value="Bulk Upload"  update=":form:fileDetail" oncomplete="PF('fileDialog').show()" /></td></tr>
	    </table>
 </div>
  <p:dialog header="Edit House Details" widgetVar="editHouseDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="500" width="500">
        <p:outputPanel id="editHouseDetail" style="text-align:center;">
 <table>
 <tr><th> 
               <h:outputText value="House No" /> </th>
             
	<td><h:inputText      value="#{apartmentDetailsBean.housedetails.str_HouseNo}"/></td>
	 
	</tr>
	<tr><th><h:outputText value="Size of House (Sqft.)" /> </th>
             
	<td><h:inputText      value="#{apartmentDetailsBean.housedetails.int_HouseSize}"/></td></tr>
	<tr><th><h:outputText value="Type Of House" /> </th>
	<td><h:selectOneMenu  value="#{apartmentDetailsBean.housedetails.str_TypeOfHouse}" > 
	 <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="1BHK" itemValue="1BHK" />
              <f:selectItem itemLabel="2BHK" itemValue="2BHK" />
              <f:selectItem itemLabel="3BHK" itemValue="3BHK" />
              <f:selectItem itemLabel="SingleBuilding" itemValue="SingleBuilding" />
              
                 </h:selectOneMenu></td></tr>
	<tr><th><h:outputText value="No Of BathRoom" /> </th>
             
	<td><h:inputText     value="#{apartmentDetailsBean.housedetails.int_NoOfBathRooms}"/></td></tr>
	<tr><th><h:outputText value="No Of Balconies" /> </th>
            
	<td><h:inputText     value="#{apartmentDetailsBean.housedetails.int_NoOfBalconies}"/></td></tr>
	<tr><th><h:outputText value="Rented" /> </th>
          <td><h:selectOneMenu    value="#{apartmentDetailsBean.housedetails.is_Rented}"> 
              <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="Yes" itemValue="Yes" />
              <f:selectItem itemLabel="No" itemValue="No" />
              
                 </h:selectOneMenu></td>   
	 </tr>
	<tr><td><h:commandButton   styleClass="btn"    value="Confirm"     action="#{apartmentDetailsBean.updateHouseDetails}" >
	 <f:ajax execute="editHouseDetail" event="click"  render="@form"/>
	 </h:commandButton>
	 </td><td><h:commandButton   styleClass="btn"    value="Cancel"    action="housedetails.xhtml" >
	  <f:ajax execute="@this" event="click"  render="@form"/>
	  </h:commandButton>
	 </td>
	 </tr>
	 </table>
 </p:outputPanel>
 </p:dialog>
 <p:dialog header="View House Details" widgetVar="viewHouseDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="200" width="400">
        <p:outputPanel id="viewHouseDetail" style="text-align:center;">
 <table>
 <tr><th> 
               <h:outputText value="House No" /> </th>
             
	<td><h:outputText  value="#{apartmentDetailsBean.housedetails.str_HouseNo}"/></td>
	 
	</tr>
	<tr><th><h:outputText value="Size of House (Sqft.)" /> </th>
             
	<td><h:outputText   value="#{apartmentDetailsBean.housedetails.int_HouseSize}"/></td></tr>
	<tr><th><h:outputText value="Type Of House" /> </th>
	<td><h:outputText    value="#{apartmentDetailsBean.housedetails.str_TypeOfHouse}"/>
	 </td></tr>
	<tr><th><h:outputText value="No Of BathRoom" /> </th>
             
	<td><h:outputText    value="#{apartmentDetailsBean.int_NoOfBedRooms}"/></td></tr>
	<tr><th><h:outputText value="No Of Balconies" /> </th>
            
	<td><h:outputText     value="#{apartmentDetailsBean.housedetails.int_NoOfBalconies}"/></td></tr>
	<tr><th><h:outputText value="Rented" /> </th>
          <td><h:outputText     value="#{apartmentDetailsBean.housedetails.is_Rented}"/>
          </td>   
	 </tr>
	 
	 </table>
 
 </p:outputPanel>
 </p:dialog>
 <p:dialog header="Add New House" widgetVar="houseDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="500" width="500">
        <p:outputPanel id="houseDetail" style="text-align:center;">
       <table style="overflow:hidden;border:0pt none;width: 50%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
	 
	<tr><th> 
               <h:outputText value="House No" /> </th>
             
	<td><h:inputText    id="HouseNo" required="true" requiredMessage="Enter House No" value="#{apartmentDetailsBean.str_HouseNo}"/></td>
	 
	</tr>
	<tr><th><h:outputText value="Size of House (Sqft.)" /> </th>
             
	<td><h:inputText    id="size" value="#{apartmentDetailsBean.int_HouseSize}"/></td></tr>
	<tr><th><h:outputText value="Type Of House" /> </th>
	<td><h:selectOneMenu  value="#{apartmentDetailsBean.str_TypeOfHouse}" > 
	 <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="1BHK" itemValue="1BHK" />
              <f:selectItem itemLabel="2BHK" itemValue="2BHK" />
              <f:selectItem itemLabel="3BHK" itemValue="3BHK" />
              <f:selectItem itemLabel="SingleBuilding" itemValue="SingleBuilding" />
              
                 </h:selectOneMenu></td></tr>
	<tr><th><h:outputText value="No Of BathRoom" /> </th>
             
	<td><h:inputText    id="NoOfBathRoom" value="#{apartmentDetailsBean.int_NoOfBedRooms}"/></td></tr>
	<tr><th><h:outputText value="No Of Balconies" /> </th>
            
	<td><h:inputText    id="BoOfBalconies" value="#{apartmentDetailsBean.int_NoOfBalconies}"/></td></tr>
	<tr><th><h:outputText value="Rented" /> </th>
          <td><h:selectOneMenu  id="isRented" value="#{apartmentDetailsBean.is_Rented}"> 
              <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="Yes" itemValue="Yes" />
              <f:selectItem itemLabel="No" itemValue="No" />
              
                 </h:selectOneMenu></td>   
	 </tr>
	<tr>
	<td><h:commandButton   styleClass="btn" id="submit"  value="Confirm"     action="#{apartmentDetailsBean.saveHouseDetails}" >
	  <f:ajax execute="houseDetail" event="click"  render="@form"/>
	 </h:commandButton>
	 </td><td>
   <h:commandButton     styleClass="btn" icon="ui-icon-close"    value="Cancel"    action="housedetails.xhtml" >
	  <f:ajax execute="@this" event="click"  render="@form"/>
	  </h:commandButton></td>
	 </tr>
	 </table>
	 </p:outputPanel>
	 </p:dialog>
	 
	 <p:dialog header="File Upload" widgetVar="fileDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="200" width="500">
        <p:outputPanel id="fileDetail" style="text-align:center;">
         <!-- inputFile tag to upload file -->
	     <table style="overflow:hidden;border:0pt none;width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
		 
		<tr><th>1</th><td>
		 
		  <h:commandButton value="Download Template"   icon="ui-icon-arrowthick-1-s" immediate="true" execute="@this">
        <p:fileDownload value="#{apartmentDetailsBean.downloadFile()}" />
           
    </h:commandButton></td> &#150; &#150;<th>2</th><td>Fill The Template</td> &#150; &#150;<th>3</th><td>Upload</td></tr></table>  
		<table> <tr><td>  <h:inputFile id="file" 
		             label="file"
			         value="#{apartmentDetailsBean.part}"> 
			       
            <!--  FileUploadValidator for file validation  -->
            
            <f:validator validatorId="BulkUploadValidator" /> 
            </h:inputFile>
                    
		       <h:commandButton style="width:120px;height:25px" id="submit1"   action="#{apartmentDetailsBean.uploadFile}"
			             value="Upload" >
			           <f:ajax render="@form" execute="file" update="msgs"/>

			             </h:commandButton>  <br />
			             <!-- status message of file upload; rendered if message is set -->
		<h:outputText value="#{apartmentDetailsBean.statusMessage}"
			          rendered="#{not empty apartmentDetailsBean.statusMessage}" /></td></tr></table>
        </p:outputPanel>
        </p:dialog>
 </h:form>
      
  
 </body>
 </ui:define>
 </ui:composition>