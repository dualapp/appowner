 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="#{expenseBean.str_Name}include/templates/#{expenseBean.templateIndicator}"
                xmlns:c="http://java.sun.com/jsp/jstl/core">
	<ui:define name="content">
	<h:head>
	<style type="text/css">
 .ui-growl {
 position:absolute;
        
         width:400px;
         left:50%;
         top:200px;
         margin-left:-200px; 

}
</style>

     
	</h:head>
	<table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px;margin-top:5px" class="src">
		<tbody>
			<tr>
				<td> 
					<img src="#{expenseBean.str_Name}images/facility.png" height="50" width="50"></img> <span class="title">Book A Facility</span>
				</td>
			</tr> 
		</tbody>
	</table>
	 <h:form id="form">
	<p:growl id="ui-growl" globalOnly="true" sticky="true" />
	 
	 
 <div id="page3">  
  <table   style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"><tr><th>
               <p:outputLabel value="Organisation:" /> </th>
             <td> <h:selectOneMenu  value="#{requestScopeBean.str_OrganizationName}">&nbsp;
             <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="#{loginBean.str_ApartmentName}"  itemValue="#{loginBean.str_ApartmentName}" />
    </h:selectOneMenu></td>
   <th><p:outputLabel value="Falility"/></th>  <td><h:selectOneMenu id="Facility" value="#{requestScopeBean.str_FacilityType}"  >
    <f:selectItem itemLabel="Select One" itemValue="" />
     <f:selectItems value="#{expenseBean.facilityTypeList}"/>
     
    </h:selectOneMenu>
    </td>
    <th><p:outputLabel value="Status"></p:outputLabel></th>
    <td> <h:selectOneMenu   value="#{requestScopeBean.str_Status}"> 
    <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="All"  itemValue="All" />
              <f:selectItem itemLabel="Open"  itemValue="Open" />
              <f:selectItem itemLabel="Pending Aproval"  itemValue="Pending Aproval" />
              <f:selectItem itemLabel="Closed"  itemValue="RequestClosed" />
            </h:selectOneMenu>
            </td>
   
     </tr>
    <tr><th><p:outputLabel value="Period"></p:outputLabel></th>
    <td><!-- <h:selectOneMenu value="#{requestScopeBean.str_Period}">
            <f:selectItem itemLabel="Select One" itemValue="" />
            <f:selectItem   itemValue="#{requestScopeBean.today}" itemLabel="Today"/>
            <f:selectItem  itemLabel="Lastweek" itemValue="Private" />
             <f:selectItem  itemLabel="CurrentMonth" itemValue="Private" />
              <f:selectItem  itemLabel="NextMonth" itemValue="Private" />
               <f:selectItem  itemLabel="PreviousMonth" itemValue="Private" />
                <f:selectItem  itemLabel="SpecificDate" itemValue="Private" />
      </h:selectOneMenu> --><h:selectOneMenu id="car" value="#{requestScopeBean.str_Period}" valueChangeListener="#{requestScopeBean.accountchangeListener3}" >
           
            <f:selectItems value="#{requestScopeBean.dates}" />
              <p:ajax event="click" partialSubmit="true"  update="date" process="car"/>
       </h:selectOneMenu>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                  <p:calendar  id="date"  required="true" requiredMessage="Please enter Duration" navigator="true" pattern="dd-MM-yyyy"   value="#{requestScopeBean.dat_ToDate}">
                  </p:calendar>&nbsp; &nbsp; &nbsp;</td>
    <th><p:outputLabel value="Event Type"/></th> 
   <td><h:selectOneMenu value="#{requestScopeBean.str_EventType}">
            <f:selectItem itemLabel="Select One" itemValue="" />
            <f:selectItem   itemValue="Public" itemLabel="Public"/>
            <f:selectItem  itemLabel="Private" itemValue="Private" />
      </h:selectOneMenu></td> 
     
     <td></td><td><h:commandButton style="width:120px;height:25px" update="DT" value="Go" action="#{requestScopeBean.getBookAFacilityList}"/></td>
    </tr>
    </table></div>
    <div id="page3"> 
	  
           <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
           <tr><td>     
              <p:button  style="width:120px;height:25px"  icon="ui-icon-plus"  outcome="createnewbookafacility.xhtml" value="create new" /> 
	    &#150; &#150; <p:menuButton value="Action">
        <p:menuitem value="Assign Selected" rendered="#{expenseBean.isEnable}" action="#{requestScopeBean.assignRequestedService}"/>
        <p:menuitem value="close Selected" action="#{requestScopeBean.closeRequestedService}"/>
         <p:menuitem value="Notify By Email" process="DT"  update=":form:bookedDetail1"    oncomplete="PF('bookedDialog1').show()" />
        <p:menuitem value="Notify by sms"  action="#{expenseBean.getOnePool}"/>
        <p:menuitem value="View Chart" />
         <p:menuitem value="View Summary" />
         <p:menuitem value="Export To Excel"/>
        </p:menuButton>
         &#150; &#150;  <p:commandButton  style="width:120px;height:25px" process="DT" update=":form:bookDetail2" icon="ui-icon-info" value="View" oncomplete="PF('bookDialog2').show()" />
       &#150; &#150; <p:commandButton style="width:120px;height:25px"  rendered="#{expenseBean.isEnable}" process="DT" update=":form:bookDetail3" icon="ui-icon-pencil" value="Edit " oncomplete="PF('bookDialog3').show()" />
       &#150; &#150;  <p:commandButton style="width:120px;height:25px"  rendered="#{expenseBean.isEnable}" update="DT" process="DT" onclick="return confirm('Are you sure you want to delete ?');" action="#{requestScopeBean.deleteBookedFacility()}" icon="ui-icon-trash" value="Delete" />
     &#150; &#150;   <p:commandButton style="width:120px;height:25px" icon="ui-icon-refresh"    onclick="javascript:history.go(0);" value="Refresh" />
      &#150; &#150; <h:commandLink id="excel">
       <p:graphicImage  height="20" width="20" alt="excel" value="#{expenseBean.str_Name}images/excel.jpg"/>
        <p:dataExporter type="xls"    target="DT" fileName="BookDetails" />
    </h:commandLink>
 
    &#150; &#150;<h:commandLink id="pdf">
       <p:graphicImage  height="20" width="20" alt="pdf" value="#{expenseBean.str_Name}images/pdf.jpg"/>
        <p:dataExporter type="pdf"    target="DT" fileName="BookDetails" />
    </h:commandLink>
 
   &#150; &#150; <h:commandLink id="csv">
       <p:graphicImage  height="20" width="20" alt="cvs" value="#{expenseBean.str_Name}images/cvs.png"/>
        <p:dataExporter type="csv"    target="DT" fileName="BookDetails" />
    </h:commandLink>
 
   &#150; &#150; <h:commandLink id="xml">
       <p:graphicImage  height="20"    width="20" alt="xml" value="#{expenseBean.str_Name}images/xml.png"/>
        <p:dataExporter type="xml"    target="DT" fileName="BookDetails" />
    </h:commandLink>
     
       </td></tr></table>
	 
	       
             <p:dataTable   id="DT"   resizableColumns="true" style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" 
               rows="3"  paginatorPosition="bottom" paginator="true"  
         emptyMessage="No Records Found" paginatorAlwaysVisible="false"   var="Bf"  value="#{requestScopeBean.bookAFacilityList}"   selection="#{requestScopeBean.selectedBookAFacility}" rowKey="#{Bf.int_FacilityBookId}">
	 
	 
	 <p:column     exportable="false"  selectionMode="multiple" style="width:35px;text-align:center">
            </p:column>
          <p:column headerText="Organization">
                <p:outputLabel value="#{loginBean.str_ApartmentName}" /> 
            
	 </p:column>
	  <p:column headerText="EventName">
                <p:outputLabel value="#{Bf.str_EventName}" /> 
            
	 </p:column>
	 <p:column headerText="Facility">
                <p:outputLabel value="#{Bf.str_FacilityType}" /> 
            
	 </p:column>
	 <p:column headerText="Start Date">
                <p:outputLabel value="#{Bf.dat_OpenDate}" /> 
            
	 </p:column>
	 <p:column headerText="End Date">
                <p:outputLabel value="#{Bf.str_CloseDate}" /> 
            
	 </p:column>
	 <p:column headerText="Event Type">
                <p:outputLabel value="#{Bf.str_EventType}" /> 
            
	 </p:column>
	  <p:column headerText="Created By">
                <p:outputLabel value="#{Bf.str_CreatedBy}"/> 
            
	 </p:column>
	 
	 </p:dataTable>
	 </div>
	 
	  <p:dialog header="Email" widgetVar="bookedDialog1" showEffect="explode" hideEffect="bounce" resizable="false" height="500" width="500">
        <p:outputPanel id="bookedDetail1" style="text-align:center;">
             
            <legend  style="background-color:#438eb9; color:#fff;">Email</legend>
            <table>
            <tr><th><p:outputLabel value="Select recipient"/></th>
            <td><h:selectOneRadio id="Audience"
                      value="#{expenseBean.str_PoolAudience}">
        <f:selectItem   itemLabel="All Members" itemValue="1" />
        <f:selectItem   itemLabel="Admin And Committees" itemValue="2" />
        </h:selectOneRadio></td></tr>
       <tr> <th><p:outputLabel value="To"/></th><br/>
       <td><p:inputTextarea value="#{loginBean.str_EmailId}" readonly="true" rows="6" cols="33"/></td></tr>
       <tr><th><p:outputLabel value="MESSAGE*"/></th><br/>
        <td><p:inputTextarea   rows="6" cols="33"/></td></tr>
       <tr><td><h:commandButton  styleClass="btn" value="Send" action="#"/></td>  <td><h:commandButton styleClass="btn"  value="Cancel" action="book a facility.xhtml"/></td></tr>
        </table>
        
         
            </p:outputPanel>
            </p:dialog>
            
             <p:dialog header="BookedFacility Details" widgetVar="bookDialog2"     showEffect="explode" hideEffect="bounce" resizable="false" height="400" width="400">
        <p:outputPanel id="bookDetail2" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{requestScopeBean.selectedBookAFacility}" var="bf1">
               <tr>
 <th>
    <p:outputLabel value="Organization:"/></th>
    <td>
    <p:outputLabel value="#{loginBean.str_ApartmentName}" /></td>
    </tr>
     <tr>
 <th>
    <p:outputLabel value="Event Name:"/></th>
    <td>
      <p:outputLabel value="#{bf1.str_EventName}" /> </td>
    </tr>
     <tr>
 <th>
    <p:outputLabel value="Facility:"/></th>
    <td>
     <p:outputLabel value="#{bf1.str_FacilityType}" />  </td>
    </tr>
    <tr>
 <th>
    <p:outputLabel value="Open Date:"/></th>
    <td>
      <p:outputLabel value="#{bf1.dat_OpenDate}" />   </td>
    </tr>
    <tr>
 <th>
    <p:outputLabel value="Close Date:"/></th>
    <td>
      <p:outputLabel value="#{bf1.str_CloseDate}" />   </td>
    </tr>
    
       <tr>
 <th>
    <p:outputLabel value="Event Type:"/></th>
    <td>
      <p:outputLabel value="#{bf1.str_EventType}" />    </td>
    </tr>
    
      <tr>
 <th>
    <p:outputLabel value="Created By:"/></th>
    <td>
      <p:outputLabel value="#{bf1.str_CreatedBy}" />   </td>
    </tr>
            
            </ui:repeat>
            </table>
            </p:outputPanel>
            </p:dialog>
            
             <p:dialog header="Edit BookedFacility Details" widgetVar="bookDialog3"     showEffect="explode" hideEffect="bounce" resizable="false" height="550" width="400">
        <p:outputPanel id="bookDetail3" style="text-align:center;">
         <ui:repeat value="#{requestScopeBean.selectedBookAFacility}" var="bf1">
           <table>
              
           
            
             <tr>
 <th>
    <p:outputLabel value="Organization:"/></th>
    <td>
    <p:inputText value="#{loginBean.str_ApartmentName}" /></td>
    </tr>
     <tr>
 <th>
    <p:outputLabel value="Event Name:"/></th>
    <td>
      <p:inputText value="#{bf1.str_EventName}" /> </td>
    </tr>
     <tr>
 <th>
    <p:outputLabel value="Facility:"/></th>
    <td>
     <p:inputText value="#{bf1.str_FacilityType}" />  </td>
    </tr>
    <tr>
 <th>
    <p:outputLabel value="Open Date:"/></th>
    <td>
     <p:calendar  navigator="true" pattern="dd-MM-yyyy"    value="#{bf1.dat_OpenDate}"/>
                   
     </td>
    </tr>
    <tr>
 <th>
    <p:outputLabel value="Close Date:"/></th>
    <td>
     <p:inputText value="#{bf1.str_CloseDate}" />   </td>
    </tr>
    
       <tr>
 <th>
    <p:outputLabel value="Event Type:"/></th>
    <td>
      <p:inputText  value="#{bf1.str_EventType}" />    </td>
    </tr>
    
      <tr>
 <th>
    <p:outputLabel value="Created By:"/></th>
    <td>
      <p:inputText value="#{bf1.str_CreatedBy}" />   </td>
    </tr> </table>
           <div>
              <hr/>
             
            
            <h:commandButton value="update" styleClass="btn" action="#{requestScopeBean.updateBookAFacility(bf1)}"/>
              &#150; &#150;<h:commandButton onclick="bookDialog3.hide()"  styleClass="btn" action="book a facility.xhtml" value="Cancel"/> 
           </div>
           
            
             </ui:repeat>
            </p:outputPanel>
            </p:dialog>
             
	  
	 </h:form>
	</ui:define>
	</ui:composition>
	
	 