<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="#{expenseBean.str_Name}include/templates/template.xhtml">
	<ui:define name="content">

	
	<h:head>

	 
	 <script src="JavaScript/ModalPopupWindow.js" type="text/javascript">
	 
	 </script>

 <style>
     body
        {
            font-family: Verdana;
            font-size: 10px;
         
        }
     
    </style>
    <script>

 var modalWin = new CreateModalPopUpObject();
 modalWin.SetLoadingImagePath("images/loading.gif");
 modalWin.SetCloseButtonImagePath("images/remove.gif");
 //Uncomment below line to make look buttons as link
 //modalWin.SetButtonStyle("background:none;border:none;textDecoration:underline;cursor:pointer");
function ShowNewPage1(){
 var callbackFunctionArray = new Array(Submit, Cancel);
 modalWin.ShowURL('editservicerequest.xhtml',400,350,'Edit service details',null,callbackFunctionArray);
 }
function ShowNewPage2(){
 var callbackFunctionArray = new Array(Submit, Cancel);
 modalWin.ShowURL('viewservicerequest.xhtml',400,350,'view service details',null,callbackFunctionArray);
 }
function ShowNewPage3(){
	 var callbackFunctionArray = new Array(Submit, Cancel);
	 modalWin.ShowURL('delectservicerequest.xhtml',200,150,'delete service',null,callbackFunctionArray);
	 }
 
 
function ShowMessage() {
 modalWin.ShowMessage('This Modal Popup Window using Javascript',200,400,'User Information');
 }
  
 function  ShowMessageWithAction(){
    //ShowConfirmationMessage(message, height, width, title,onCloseCallBack, firstButtonText, onFirstButtonClick, secondButtonText, onSecondButtonClick);
    modalWin.ShowConfirmationMessage('This is confirmation window using Javascript',200,400,'User Confirmation',null,'Agree',Action1,'Disagree',Action2);
 }

function ShowMessageNoDragging(){
 modalWin.Draggable=false;
 modalWin.ShowMessage('You can not drag this window',200,400,'User Information');

}

function Action1(){
alert('Action1 is excuted');
modalWin.HideModalPopUp();
}

function Action2(){
alert('Action2 is excuted');
modalWin.HideModalPopUp();
}

function Submit(msg){
modalWin.HideModalPopUp();
modalWin.ShowMessage(msg,200,400,'User Information',null,null);
}

function Cancel(){
modalWin.HideModalPopUp();
modalWin.ShowMessage(msg,200,400,'User Information',null,null);
}

function HideModalWindow() {
    modalWin.HideModalPopUp();
}

function ShowChildWindowValues(name,email,address,phone,zip) {
    var displayString = "<b>Values Of Child Window</b> <br/><br/>Name : " + name;
    displayString += "<br/><br/>Email : " + email;
    displayString += "<br/><br/>Address : " + address;
    displayString += "<br/><br/>Phone : " + phone;
    displayString += "<br/><br/>Zip : " + zip;
    var div = document.getElementById("divShowChildWindowValues");
    div.style.display = "";
    div.innerHTML = displayString;
}
</script>

 </h:head>
   <table cellpadding="0" cellspacing="0" border="1" width="100%" class="src">
		<tbody>
			<tr>
				<td> 
					<img src="#{expenseBean.str_Name}images/started.jpg" height="50" width="50"></img> <span class="title">Service Request</span>
				</td>
			</tr>
		</tbody>
	</table>
  <h:form id="form">
   <p:growl id="msgs" showDetail="true" />
  
                 <div id="page3"> 
  <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"><tr><th>
               <h:outputText value="Organisation:" /> </th>
             <td> <p:selectOneMenu value="#{requestScopeBean.str_OrganizationName}">&nbsp;
             <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="#{loginBean.str_ApartmentName}"  itemValue="#{loginBean.str_ApartmentName}" />
    </p:selectOneMenu></td>
   <th><h:outputText value="VendorCategory"/></th>  <td><p:selectOneMenu value="#{requestScopeBean.str_VendorType}">
   <f:selectItem itemLabel="Select One" itemValue="" />
    <f:selectItems value="#{vendorBean.str_VendorTypeList}"/></p:selectOneMenu>
    </td>
    <th><h:outputText value="Status"></h:outputText></th>
    <td> <p:selectOneMenu   value="#{requestScopeBean.str_Status}"> 
    <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="All"  itemValue="All" />
              <f:selectItem itemLabel="open"  itemValue="open" />
              <f:selectItem itemLabel="Assigned"  itemValue="Progress" />
              <f:selectItem itemLabel="Closed"  itemValue="RequestClosed" />
            </p:selectOneMenu>
            </td>
   
     </tr>
    <tr><th><h:outputText value="Period"></h:outputText></th>
    <td><p:selectOneMenu style="" value="#{requestScopeBean.str_Period}">
            <f:selectItem itemLabel="Select One" itemValue="" />
            <f:selectItem   itemValue="#{requestScopeBean.today}" itemLabel="Today"/>
            <f:selectItem  itemLabel="Lastweek" itemValue="Private" />
             <f:selectItem  itemLabel="CurrentMonth" itemValue="Private" />
              <f:selectItem  itemLabel="NextMonth" itemValue="Private" />
               <f:selectItem  itemLabel="PreviousMonth" itemValue="Private" />
                <f:selectItem  itemLabel="SpecificDate" itemValue="Private" />
      </p:selectOneMenu></td>
     
     <td></td><td><h:commandButton update="DT" value="Go" action="#{requestScopeBean.getListServiceRequest}"/></td>
    </tr>
    </table> 
   </div>
   
        <div id="page3">  <div class="gsTitleDiv">List Of Service Request<br/><hr/></div>
           <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"><tr><td>  <h:commandButton    action="createnewservicerequest" value="create new" />  &#150; &#150;
	   &#150; &#150; <p:menuButton value="Action">
        <p:menuitem value="Assign Selected"  process="DT" update=":form:pd2" icon="ui-icon-tick"   oncomplete="PF('pDialog2').show()" />
        <p:menuitem value="close Selected" process="DT" update=":form:pd3" icon="ui-icon-tick"   oncomplete="PF('pDialog3').show()"/>
        <p:menuitem value="View Chart" />
         <p:menuitem value="View Summary" />
         <p:menuitem value="Export To Excel"/>
        </p:menuButton>
	       &#150; &#150; <p:commandButton process="DT" update=":form:pd" icon="ui-icon-pencil" value="Edit " oncomplete="PF('pDialog').show()" />
	       &#150; &#150; <p:commandButton process="DT" update=":form:pd1"  icon="ui-icon-search" value="View " oncomplete="PF('pDialog1').show()" />
	     &#150; &#150;   <p:commandButton update="DT" process="DT" onclick="return confirm('Are you sure you want to delete ?');" action="#{requestScopeBean.deleteServices()}" icon="ui-icon-trash" value="Delete" />
	
	<h:commandLink id="excel">
       <p:graphicImage  height="20" width="20" alt="excel" value="#{expenseBean.str_Name}images/excel.jpg"/>
        <p:dataExporter type="xls"    target="DT" fileName="Service Request" />
    </h:commandLink>
 
    <h:commandLink id="pdf">
       <p:graphicImage  height="20" width="20" alt="pdf" value="#{expenseBean.str_Name}images/pdf.jpg"/>
        <p:dataExporter type="pdf"    target="DT" fileName="Service Request" />
    </h:commandLink>
 
    <h:commandLink id="csv">
       <p:graphicImage  height="20" width="20" alt="cvs" value="#{expenseBean.str_Name}images/cvs.png"/>
        <p:dataExporter type="csv"    target="DT" fileName="Service Request" />
    </h:commandLink>
 
    <h:commandLink id="xml">
       <p:graphicImage  height="20"    width="20" alt="xml" value="#{expenseBean.str_Name}images/xml.png"/>
        <p:dataExporter type="xml"    target="DT" fileName="Service Request" />
    </h:commandLink>
	</td></tr></table>
                
        <p:dataTable id="DT" rows="3"   paginatorPosition="bottom" style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" paginator="true" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        rowsPerPageTemplate="1,2,3"   resizableColumns="true"      var="sr"  value="#{requestScopeBean.listServiceRequest}"  selection="#{requestScopeBean.selectedServices}" rowKey="#{sr.int_ServiceRequestId}"> 
                
	 <p:column     exportable="false"  selectionMode="multiple" style="width:35px;text-align:center">
         
             </p:column>
           	  
	 <p:column headerText="Organization">
                <h:outputText value="#{loginBean.str_ApartmentName}" /> 
            
	 </p:column>
	 
	 <p:column headerText="Created On">
                <h:outputText value="#{sr.str_OpenDate}" /> 
            
	 </p:column>
	 <p:column headerText="Category">
                <h:outputText value="#{sr.str_VendorType}" /> 
            
	 </p:column>
	 <p:column headerText="Title">
                <h:outputText value="#{sr.str_Title}" /> 
            
	 </p:column>
	 <p:column headerText="Status">
                <h:outputText value="#{sr.str_Status}" /> 
            
	 </p:column>
	 
	 <p:column headerText="Flat">
                <h:outputText value="#{sr.str_Flat}" /> 
            
	 </p:column>
	 </p:dataTable>
	   <p:dialog header="Edit Service Details" widgetVar="pDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="300" width="400">
        <p:outputPanel id="pd" style="text-align:center;">
           <table>
               
            <ui:repeat value="#{requestScopeBean.selectedServices}" var="sr1">
             <tr>
 <th>
    <h:outputText value="Organization Name:"/></th>
    <td>
    <h:inputText value="#{expenseBean.str_OrganizationName}"/></td>  
    </tr>
    <tr>
 <th>
    <h:outputText value="Service category:"/></th>
    <td>
    <h:inputText value="#{sr1.str_VendorType}"/></td>  
    </tr>
    <tr>
 <th>
    <h:outputText value="Created On:"/></th>
    <td>
    <h:inputText value="#{sr1.str_OpenDate}"/></td>  
    </tr>
      <tr>
 <th>
    <h:outputText value="Title:"/></th>
    <td>
    <h:inputText value="#{sr1.str_Title}"/></td>  
    </tr>

  <tr>
 <th>
    <h:outputText value="Status:"/></th>
    <td>
    <h:inputText value="#{sr1.str_Status}"/></td>  
    </tr>
      <tr>
 <th>
    <h:outputText value="Flat:"/></th>
    <td>
    <h:inputText value="#{sr1.str_Flat}"/></td>  
    </tr>
    <tr><td><h:commandButton value="Update" action="#{requestScopeBean.updateOneServiceRequest(sr1)}"/></td>
    <td><h:commandButton value="Cancel" action="servicerequest.xhtml"/></td>
    </tr>
             </ui:repeat>
             </table>
             </p:outputPanel>
             </p:dialog>
             <p:dialog header="Service Details" widgetVar="pDialog1"     showEffect="explode" hideEffect="bounce" resizable="false" height="300" width="400">
        <p:outputPanel id="pd1" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{requestScopeBean.selectedServices}" var="sr1">
            
            <tr>
 <th>
    <h:outputText value="Organization Name:"/></th>
    <td>
     <h:outputText value="#{expenseBean.str_OrganizationName}"/></td>  
    </tr>
    <tr>
 <th>
    <h:outputText value="Service category:"/></th>
    <td>
     <h:outputText value="#{sr1.str_VendorType}"/></td>  
    </tr>
    <tr>
 <td>
    <h:outputText value="Created On:"/></td>
    <td>
     <h:outputText value="#{sr1.str_OpenDate}"/></td>  
    </tr>
      <tr>
 <th>
    <h:outputText value="Title:"/></th>
    <td>
     <h:outputText value="#{sr1.str_Title}"/></td>  
    </tr>

  <tr>
 <th>
    <h:outputText value="Status:"/></th>
    <td>
    <h:outputText value="#{sr1.str_Status}"/></td>  
    </tr>
      <tr>
 <th>
    <h:outputText value="Flat:"/></th>
    <td>
     <h:outputText value="#{sr1.str_Flat}"/></td>  
    </tr>
    
            </ui:repeat>
            </table>
            </p:outputPanel>
            </p:dialog>
            
             
              <p:dialog header="Service  Details" widgetVar="pDialog2"     showEffect="explode" hideEffect="bounce" resizable="false" height="200" width="400">
        <p:outputPanel id="pd2" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{requestScopeBean.selectedServices}" var="sr1">
            
            <tr><th><h:outputText value="Selected request will be assign click yes to confirm"/></th></tr>
           <tr><td><p:selectBooleanCheckbox      value="#"/> <h:outputText value="Send Email to creator"/> </td></tr>
           <tr><td><p:selectBooleanCheckbox     value="#"/><h:outputText value="Send Email to creator"/></td></tr>
           <tr><td><h:commandButton value="yes" action="#{requestScopeBean.assignRequestedService(sr1)}"/> 
           <h:commandButton value="No" action="servicerequest.xhtml"/></td>
           </tr>
            </ui:repeat>
            </table>
            </p:outputPanel>
            </p:dialog>
            <p:dialog header="Service  Details" widgetVar="pDialog3"     showEffect="explode" hideEffect="bounce" resizable="false" height="100" width="300">
        <p:outputPanel id="pd3" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{requestScopeBean.selectedServices}" var="sr1">
            
            <tr><th><h:outputText value="Selected request will be closed click yes to confirm"/></th></tr>
           <tr><td><p:selectBooleanCheckbox      value="#"/> <h:outputText value="Send Email to creator"/> </td></tr>
           <tr><td><p:selectBooleanCheckbox     value="#"/><h:outputText value="Send Email to creator"/></td></tr>
           <tr><td><h:commandButton value="yes" action="#{requestScopeBean.closeRequestedService(sr1)}"/> 
           <h:commandButton value="No" action="servicerequest.xhtml"/></td>
           </tr>
            </ui:repeat>
            </table>
            </p:outputPanel>
            </p:dialog>
             </div>
    </h:form>
    
	</ui:define>
	</ui:composition>
 