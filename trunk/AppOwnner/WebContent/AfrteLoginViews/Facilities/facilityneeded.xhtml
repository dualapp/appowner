<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	 xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://java.sun.com/jstl/core"
      template="#{expenseBean.str_Name}include/templates/template1.xhtml"
                xmlns:t="http://primefaces.org/ui">
	 <ui:define name="content">


	<h:head>

	<title></title>
	 <script src="JavaScript/ModalPopupWindow.js" type="text/javascript">
	 
	 </script>

 <style>
     body
        {
            font-family: Verdana;
            font-size: 10px;
         
        }
     
    </style>
    <script>

 var modalWin = new CreateModalPopUpObject();
 modalWin.SetLoadingImagePath("images/loading_home.gif");
 modalWin.SetCloseButtonImagePath("images/cross.png");
 //Uncomment below line to make look buttons as link
 //modalWin.SetButtonStyle("background:none;border:none;textDecoration:underline;cursor:pointer");

function ShowNewPage1(){
 var callbackFunctionArray = new Array(Submit, Cancel);
 modalWin.ShowURL('createnewfacilityneeded.xhtml',400,350,'Create New facility',null,callbackFunctionArray);
 }
 
 
function ShowMessage() {
 modalWin.ShowMessage('This Modal Popup Window using Javascript',200,400,'User Information');
 }
  
 function  ShowMessageWithAction(){
    //ShowConfirmationMessage(message, height, width, title,onCloseCallBack, firstButtonText, onFirstButtonClick, secondButtonText, onSecondButtonClick);
    modalWin.ShowConfirmationMessage('This is confirmation window using Javascript',200,400,'User Confirmation',null,'Agree',Action1,'Disagree',Action2);
 }

function ShowMessageNoDragging(){
 modalWin.Draggable=false;
 modalWin.ShowMessage('You can not drag this window',200,400,'User Information');

}

function Action1(){
alert('Action1 is excuted');
modalWin.HideModalPopUp();
}

function Action2(){
alert('Action2 is excuted');
modalWin.HideModalPopUp();
}

function Submit(msg){
modalWin.HideModalPopUp();
modalWin.ShowMessage(msg,200,400,'User Information',null,null);
}

function Cancel(){
modalWin.HideModalPopUp();
modalWin.ShowMessage(msg,200,400,'User Information',null,null);
}

function HideModalWindow() {
    modalWin.HideModalPopUp();
}

function ShowChildWindowValues(name,email,address,phone,zip) {
    var displayString = "<b>Values Of Child Window</b> <br/><br/>Name : " + name;
    displayString += "<br/><br/>Email : " + email;
    displayString += "<br/><br/>Address : " + address;
    displayString += "<br/><br/>Phone : " + phone;
    displayString += "<br/><br/>Zip : " + zip;
    var div = document.getElementById("divShowChildWindowValues");
    div.style.display = "";
    div.innerHTML = displayString;
}
</script>

 </h:head>
	 <h:form id="form">
	  <p:growl id="msgs" showDetail="true" />
	<h:body>
	 <div id="page3"><div class="gsTitleDiv"> Facility Needed<br/><hr/></div> 
	 <table  style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"><tr><td> <h:outputText value="Organisation:" />   
             <p:selectOneMenu       style="width:100px">
              <f:selectItem itemLabel="#{expenseBean.str_OrganizationName}"  itemValue="#{expenseBean.str_OrganizationName}" />
                
                 </p:selectOneMenu></td></tr>
	  
                <tr><td> <p:commandButton  process="DT" update=":form:multiFacilityDetail1"  value="Create New"  oncomplete="PF('multiFacilityDialog1').show()" />
            &#150; &#150; <h:commandButton   value="Refresh" />
	
	 &#150; &#150;  <p:commandButton process="DT" update=":form:multiFacilityDetail2" icon="ui-icon-search" value="View" oncomplete="PF('multiFacilityDialog2').show()" />
       &#150; &#150; <p:commandButton process="DT" update=":form:multiFacilityDetail3" icon="ui-icon-pencil" value="Edit " oncomplete="PF('multiFacilityDialog3').show()" />
       &#150; &#150;  <p:commandButton update="DT" process="DT" onclick="return confirm('Are you sure you want to delete ?');" action="#{expenseBean.deleteOneAsset1()}" icon="ui-icon-trash" value="Delete" />
                 <h:commandLink id="excel">
       <p:graphicImage  height="20" width="20" alt="excel" value="#{expenseBean.str_Name}images/excel.jpg"/>
        <p:dataExporter type="xls" pageOnly="true"  target="DT" fileName="FaciliyiNeeded" />
    </h:commandLink>
 
    <h:commandLink id="pdf">
       <p:graphicImage  height="20" width="20" alt="pdf" value="#{expenseBean.str_Name}images/pdf.jpg"/>
        <p:dataExporter type="pdf" pageOnly="true"  target="DT" fileName="FaciliyiNeeded" />
    </h:commandLink>
 
    <h:commandLink id="csv">
       <p:graphicImage  height="20" width="20" alt="cvs" value="#{expenseBean.str_Name}images/cvs.png"/>
        <p:dataExporter type="csv"  pageOnly="true" target="DT" fileName="FaciliyiNeeded" />
    </h:commandLink>
 
    <h:commandLink id="xml">
       <p:graphicImage  height="20"  pageOnly="true" width="20" alt="xml" value="#{expenseBean.str_Name}images/xml.png"/>
        <p:dataExporter type="xml" pageOnly="true"  target="DT" fileName="FaciliyiNeeded" />
    </h:commandLink>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  <h:commandButton value="first" action="#{expenseBean.pageFirst}"
                                             disabled="#{expenseBean.firstRow == 0}">
                                              <f:ajax render="@form" execute="@form"/>
                                              </h:commandButton>
                            <h:commandButton value="prev" action="#{expenseBean.pagePrevious}"
                                             disabled="#{expenseBean.firstRow == 0}" >
                                              <f:ajax render="@form" execute="@form"/>
                                              </h:commandButton>
                            <h:commandButton value="next" action="#{expenseBean.pageNext}"
                                             disabled="#{expenseBean.firstRow + expenseBean.rowPerPage >= expenseBean.totalRows}" >
                                             </h:commandButton>
                            <h:commandButton value="last" action="#{expenseBean.pageLast}"
                                             disabled="#{expenseBean.firstRow + expenseBean.rowPerPage >= expenseBean.totalRows}" >
                                              <f:ajax render="@form" execute="@form"/>
                                              </h:commandButton>
                            <h:outputLabel for="rowsPerPage" value="Rows per page" />
                            <h:inputText id="rowsPerPage" value="#{expenseBean.rowPerPage}" size="3" maxlength="3"/>
                            
                            <h:commandButton value="Set" action="#{expenseBean.pageFirst}" >
                             <f:ajax render="@form" execute="@form"/>
                             </h:commandButton>
                            <h:message for="rowsPerPage" errorStyle="color: red;" />
                             
               
                  </td></tr></table>
	           
               
                
             <p:dataTable    resizableColumns="true" style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" 
                
           id="DT" var="fn"  value="#{expenseBean.facilityNeededList}" selection="#{expenseBean.selectedFacilities}" rowKey="#{fn.int_FacilityId}">
	 
   <p:column    exportable="false"  selectionMode="multiple" style="width:35px;text-align:center">
         
             </p:column>
          <p:column headerText="Organization">
                <h:outputText value="#{expenseBean.str_OrganizationName}" /> 
                   
               </p:column>
           
          <p:column headerText="Facility Name">
               <h:outputText value="#{fn.str_FacilityName}" /> 
          </p:column>
          
	   
        
	 </p:dataTable>
	 
                           
	 <p:dialog header=" Create New" widgetVar="multiFacilityDialog1"     showEffect="explode" hideEffect="bounce" resizable="false" height="200" width="400">
        <p:outputPanel id="multiFacilityDetail1" style="text-align:center;">
           <table><tr><th>  <h:outputText  value="Organisation:" /> </th>
             <td> <p:selectOneMenu       style="width:100px">
              <f:selectItem itemLabel="#{expenseBean.str_OrganizationName}"  itemValue="#{expenseBean.str_OrganizationName}" />
                
                 </p:selectOneMenu></td> </tr>
                 
	<tr><th><h:outputText value="Facility Name*"/></th>
	<td><h:inputText  id="FacilityName"   value="#{expenseBean.str_FacilityName}">
	<p:ajax event="blur" update="FacilityNameMsg" />
	</h:inputText>
	</td>
	<td> <p:message  id="FacilityNameMsg" for="FacilityName" display="text"/> </td>
	</tr>
	<tr><td> <p:commandButton  styleClass="btn"  id="submit"  value="Submit" onclick="EnrollLaterClick()"   action="#{expenseBean.addFacility}"   >
	
	</p:commandButton> </td></tr>
	</table>  
	  
             </p:outputPanel>
             </p:dialog>
	 
	 
	 <p:dialog header="  Facility Details" widgetVar="multiFacilityDialog2"     showEffect="explode" hideEffect="bounce" resizable="false" height="100" width="200">
        <p:outputPanel id="multiFacilityDetail2" style="text-align:center;">
           <table>
               
            <ui:repeat value="#{expenseBean.selectedFacilities}" var="fn1">
             <tr>
             <th><h:outputText  value="Facility Name"/></th>
             <td> <h:outputText value="#{fn1.str_FacilityName}" />  </td>
             </tr>
              
               
             </ui:repeat>
             </table>
             </p:outputPanel>
             </p:dialog>
             <p:dialog header="  Edit Facility Details" widgetVar="multiFacilityDialog3"     showEffect="explode" hideEffect="bounce" resizable="false" height="100" width="200">
        <p:outputPanel id="multiFacilityDetail3" style="text-align:center;">
           <table>
               
            <ui:repeat value="#{expenseBean.selectedFacilities}" var="fn1">
             <tr>
             <th><h:outputText  value="Facility Name"/></th>
             <td> <h:inputText value="#{fn1.str_FacilityName}" />  </td>
             </tr>
              <tr><td><h:commandButton value="Update" action="#{expenseBean.updateFacility(fn1)}"/></td></tr>
               
             </ui:repeat>
             </table>
             </p:outputPanel>
             </p:dialog>
             </div>
	</h:body>
	</h:form>
	</ui:define>
	</ui:composition>