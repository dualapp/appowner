<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="#{expenseBean.str_Name}include/templates/#{expenseBean.templateIndicator}">
	<ui:define name="content">
<table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px;margin-top:5px" class="src">
		<tbody>
			<tr>
				<td> 
					<img src="#{expenseBean.str_Name}images/started.jpg" height="50" width="50"></img> <span class="title">Poll</span>
				</td>
			</tr>
		</tbody>
	</table>
 
  <h:form id="form">
   <p:growl id="msgs" showDetail="true" />
  
   
  
     <div id="page3">
            
       <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
           <tr>  
         
              <th><h:outputText value="Organisation:" /></th>
               
            <td>  <h:selectOneMenu >
              <f:selectItem itemLabel="#{expenseBean.str_OrganizationName}"  itemValue="#{expenseBean.str_OrganizationName}" />
                
                 </h:selectOneMenu>
             </td>
            
             <th><h:outputText  value="Status:" /></th>
               <td><h:selectOneMenu   value="#{expenseBean.str_Status}">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                   <f:selectItem itemLabel="Open" itemValue="Open"  />
                    <f:selectItem itemLabel="Closed" itemValue="Closed"  />
                   
                 </h:selectOneMenu>
             </td>
              
             <th><h:outputText  value="Pool in the last:" /></th>
               <td><h:selectOneMenu   value="#{expenseBean.str_ExpenseCategory}">
                  <f:selectItem itemLabel="3 Month" itemValue="3 Month" />
                   <f:selectItem itemLabel="6 Month" itemValue="6 Month"  />
                    <f:selectItem itemLabel="12 Month" itemValue="12 Month"  />
                   
                    
                 </h:selectOneMenu>
                 </td><th><h:commandButton value="Go" icon="ui-icon-search" action="#"/></th></tr>
                           
             
             </table>
                  </div>
           
             <div id="page3">
            
           <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
           <tr><td> 
           <p:button  outcome="createnewpool.xhtml" rendered="#{expenseBean.isEnable}"  style="width:120px;height:25px" icon="ui-icon-plus" value="Create New"/>&#150; &#150;<p:commandButton  icon="ui-icon-refresh" value="Refresh" />&#150; &#150;
           <p:menuButton style="width:120px;height:25px"  value="Action">
         <p:menuitem value="Notify by Email" process="DT"  update=":form:pollDetail"    oncomplete="PF('pollDialog').show()"/>
        <p:menuitem value="Notify by sms"  action="#{expenseBean.getOnePool}"/>
        <p:menuitem  update="DT" process="DT" onclick="return confirm('Are you sure you want to close ?');" action="#{expenseBean.deleteOnePoll1()}"    value="Close Selected"/>
         <p:menuitem value="View Summary"/>
         <p:menuitem value="Export To Excel"/>
        </p:menuButton>
         
          
        <p:button  style="width:120px;height:25px" update="DT" process="DT" icon="ui-icon-info" value="Vote Selected" outcome="vote.xhtml"/>
    
      &#150; &#150; <p:button  style="width:120px;height:25px" icon="ui-icon-info" update="DT" process="DT" value="View Selected Vote" outcome="viewpool.xhtml"/>
     
       
        &#150; &#150;  <p:button  style="width:120px;height:25px"  rendered="#{expenseBean.isEnable}" update="DT" process="DT" onclick="return confirm('Are you sure you want to delete ?');" action="#{expenseBean.deleteOnePoll1()}" icon="ui-icon-trash" value="Delete" />
              &#150; &#150; <h:commandLink id="excel">
       <p:graphicImage  height="20" width="20" alt="excel" value="#{expenseBean.str_Name}images/excel.jpg"/>
        <p:dataExporter type="xls" pageOnly="true"  target="DT" fileName="Polls" />
    </h:commandLink>
 
    &#150; &#150;<h:commandLink id="pdf">
       <p:graphicImage  height="20" width="20" alt="pdf" value="#{expenseBean.str_Name}images/pdf.jpg"/>
        <p:dataExporter type="pdf" pageOnly="true"  target="DT" fileName="Polls" />
    </h:commandLink>
 
   &#150; &#150; <h:commandLink id="csv">
       <p:graphicImage  height="20" width="20" alt="cvs" value="#{expenseBean.str_Name}images/cvs.png"/>
        <p:dataExporter type="csv"  pageOnly="true" target="DT" fileName="Polls" />
    </h:commandLink>
 
   &#150; &#150; <h:commandLink id="xml">
       <p:graphicImage  height="20"  pageOnly="true" width="20" alt="xml" value="#{expenseBean.str_Name}images/xml.png"/>
        <p:dataExporter type="xml" pageOnly="true"  target="DT" fileName="Polls" />
    </h:commandLink>
               </td></tr> </table>
             <p:dataTable sortMode="multiple"  style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"  id="DT" widgetVar="dataTable"  emptyMessage="No polls found with given criteria"     resizableColumns="true"    rows="3"  paginator="true" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        rowsPerPageTemplate="1,2,3"  paginatorPosition="bottom" var="pool" value="#{expenseBean.poolList}" selectionMode="single" selection="#{expenseBean.onePoll}" rowKey="#{pool.int_PoolId}"  >
                 
                          
         <p:column      headerText="Pool Question"  >
          
               <h:outputText   value="#{pool.str_poolQuestion}" /> 
               
            </p:column>
            
            <p:column     headerText="Start Date"  >
          
               <h:outputText   value="#{pool.str_StartDate}" /> 
               
            </p:column>
             <p:column      headerText="End Date"  >
          
               <h:outputText   value="#{pool.str_EndDate}" /> 
               
            </p:column>
            
            
            <p:column     headerText="Status"  >
          
               <h:outputText   value="#{pool.str_Status}" /> 
               
            </p:column>
            <p:column     headerText="Total Votes"  >
          
               <h:outputText   value="#{pool.int_Vote}" /> 
               
            </p:column>
          
            
         </p:dataTable>
         </div>
             <p:dialog header="Email" widgetVar="pollDialog" showEffect="explode" hideEffect="bounce" resizable="false" height="500" width="500">
        <p:outputPanel id="pollDetail" style="text-align:center;">
         
            <fieldset>
            <legend  style="background-color:#438eb9; color:#fff;">Email</legend>
            <table>
            <tr><th><h:outputText value="Select recipient"/></th>
            <td><h:selectOneRadio id="Audience"
                      value="#{expenseBean.str_PoolAudience}">
        <f:selectItem   itemLabel="All Members" itemValue="1" />
        <f:selectItem   itemLabel="Admin And Committees" itemValue="2" />
        </h:selectOneRadio></td></tr>
       <tr> <th><h:outputText value="To"/></th><br/>
       <td><p:inputTextarea value="#{loginBean.str_EmailId}" readonly="true" rows="6" cols="33"/></td></tr>
       <tr><th><h:outputText value="MESSAGE*"/></th><br/>
        <td><p:inputTextarea   rows="6" cols="33"/></td></tr>
       <tr><td><h:commandButton value="Send"/></td>  <td><h:commandButton value="Cancel"/></td></tr>
        </table>
        
            </fieldset>
             
            </p:outputPanel>
            </p:dialog>
             
         </h:form>
          
         </ui:define>
         </ui:composition>