<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="#{expenseBean.str_Name}include/templates/template1.xhtml">
	<ui:define name="content">
<h:head>
    <title>Invoice  Form</title>
   <style type="text/css">
         input[type=text] 
          {
           
           height:25px;
           weight:250px;
          }
          select
          {
           height:25px;
           weight:250px;
          }
      </style>	
      
</h:head>
<table cellpadding="0" cellspacing="0" border="1" width="100%" class="src">
		<tbody>
			<tr>
				<td> 
					<img src="#{expenseBean.str_Name}images/invoice1.jpg" height="50" width="50"></img> <span class="title">Invoice</span>
				</td>
			</tr>
		</tbody>
	</table>
<body  bgcolor="pink">
  <h:form id="form">
   <p:growl id="growl" showDetail="true" sticky="true" />  
  <div id="page3">
   <table   style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
   <tr> 
     <h:panelGroup id="performed"  >
           
              <td><h:outputLabel value="Organisation:" /></td>
              <td><p:selectOneMenu id="str_Organisation" value="#{invoiceBean.str_Organisation}" valueChangeListener="#{invoiceBean.organisationChangeListener}" style="width:150px">
                   <f:selectItem itemLabel="Select" itemValue="" noSelectionOption="true"/>
                  <f:selectItem itemLabel="#{invoiceBean.str_Organisation}" itemValue="#{invoiceBean.str_Organisation}"/>
                    <p:ajax event="change" update="str_Block" process="str_Organisation"/>
                 </p:selectOneMenu>
             </td>
             <p:spacer width="40" height="20"/>
             <td><h:outputText  value="Block:" /></td>
               <td><p:selectOneMenu id="str_Block" value="#{invoiceBean.str_Block}"  valueChangeListener="#{invoiceBean.blockChangeListener}"   style="width:150px">
                  <f:selectItem itemLabel="Select" itemValue="" noSelectionOption="true"/>
                   <f:selectItems value="#{invoiceBean.str_Blocks}" />
                    <p:ajax event="change" update="str_ApartmentNo" process="str_Block" partialSubmit="true" />
                 </p:selectOneMenu>
             </td>
              <p:spacer width="40" height="20"/>
             <td><h:outputText  value="Apartment:" /></td>
               <td><p:selectOneMenu id="str_ApartmentNo" value="#{invoiceBean.str_ApartmentNo}"  style="width:150px">
                  <f:selectItem itemLabel="Select" itemValue="" noSelectionOption="true"/>
                     <f:selectItems value="#{invoiceBean.str_BlockNo}" />
                 </p:selectOneMenu>
                 </td>
                  <p:spacer width="40" height="20"/>
                 <td><h:outputText  value="Status:" /></td>
                 <td><p:selectOneMenu id="str_Status" value="#{invoiceBean.str_Status}"  style="width:150px">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                   <f:selectItem  itemLabel="Paid" itemValue="Paid" />
                   <f:selectItem  itemLabel="Partial" itemValue="Partial" />
                    <f:selectItem  itemLabel="Due" itemValue="Due" />
                
                    <f:selectItem  itemLabel="Processing" itemValue="Processing" />
                 </p:selectOneMenu>
             </td>
            
             </h:panelGroup>
            </tr>
            <tr>
             <h:panelGroup id="aa">
            
              <td><h:outputLabel value="Invoice Date:" /></td>
              <td><h:selectOneMenu id="dat_InvoiceDate"   style="width:150px">
                  <f:selectItem itemLabel="Today" itemValue="Today"  />
                  <f:selectItem itemLabel="Last Week" itemValue="Last Week"  />
                  <f:selectItem itemLabel="Current MOnth" itemValue="Current MOnth"  />
                  <f:selectItem itemLabel="Specific Date" itemValue="Specific Date"  />
                   <f:selectItem itemLabel="Select Date Range" itemValue="Select Date Range"  />
                </h:selectOneMenu>
             </td>
              <p:spacer width="40" height="20"/>
             <td><h:outputText  value="Template:" /></td>
               <td><p:selectOneMenu id="str_InvoiceTemplate" value="#{invoiceBean.str_InvoiceTemplate}"  style="width:150px">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                   <f:selectItems value="#{invoiceBean.listInvoiceName}" />
                 </p:selectOneMenu>
             </td>
              <p:spacer width="40" height="20"/>
             <td><h:outputText  value="Period" /></td>
               <td><p:selectOneMenu id="str_BillPeriod" value="#{invoiceBean.str_BillPeriod}"  style="width:150px">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                 <f:selectItem itemLabel="JAN" itemValue="JAN"/>
                     <f:selectItem itemLabel="FEB" itemValue="FEB"/>
                       <f:selectItem itemLabel="MAR" itemValue="MAR"/>
                        <f:selectItem itemLabel="APR" itemValue="APR"/>
                          <f:selectItem itemLabel="MAY" itemValue="MAY"/>
                     <f:selectItem itemLabel="JUN" itemValue="JUN"/>
                       <f:selectItem itemLabel="JUL" itemValue="JUL"/>
                        <f:selectItem itemLabel="AUG" itemValue="AUG"/>
                          <f:selectItem itemLabel="SEP" itemValue="SEP"/>
                     <f:selectItem itemLabel="OCT" itemValue="OCT"/>
                       <f:selectItem itemLabel="NOV" itemValue="NOV"/>
                        <f:selectItem itemLabel="DEC" itemValue="DEC"/>
                 </p:selectOneMenu>
                 </td>
                  <p:spacer width="40" height="20"/>
                 <td><h:outputText  value="Year" /></td>
               <td><p:selectOneMenu id="int_Year" value="#{invoiceBean.int_Year}"  style="width:150px">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                  <f:selectItem  itemLabel="2013" itemValue="2013" />
                   <f:selectItem  itemLabel="2014" itemValue="2014" />
                    <f:selectItem  itemLabel="2015" itemValue="2015" />
                   <f:selectItem  itemLabel="2016" itemValue="2016" />
                    <f:selectItem  itemLabel="2017" itemValue="2017" />
                </p:selectOneMenu>
             </td>
            
             </h:panelGroup>
             <p:spacer width="40" height="20"/>
            <td><p:commandButton id="priya" value="Go" action="#{invoiceBean.getListInvoiceTransaction()}" update="invoice"/></td>
                 
          </tr>
          </table>
          </div>
          <div id="page3"> 
	  <div class="gsTitleDiv">List Of Invoice<br/><hr/></div>
           <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
          <tr><td>  <p:button  style="width:120px;height:25px" icon="ui-icon-plus" value="Create New" outcome="createnewinvoice.xhtml"/>&#150; &#150;<h:commandButton  style="width:120px;height:25px" update="invoice" process="invoice" action="viewinvoice.xhtml"   icon="ui-icon-search" value="View"  />
								&#150; &#150;<p:commandButton  style="width:120px;height:25px" update="invoice" process="invoice" onclick="return confirm('Are you sure you want to delete ?');" action="#{invoiceBean.deleteInvoice()}" icon="ui-icon-trash" value="Delete" /> &#150; &#150; <h:commandButton  style="width:120px;height:25px" id="jjj"  process="invoice" action="#{invoiceBean.cancel()}"   icon="ui-icon-search" value="Make Payment" disabled="#{invoiceBean.indicate}" update="growl" >
								
							</h:commandButton>
								&#150; &#150;<p:commandButton style="width:120px;height:25px" icon="ui-icon-refresh"  value="Refresh" />
         
           <h:commandLink id="excel">
       <p:graphicImage  height="20" width="20" alt="excel" value="#{expenseBean.str_Name}images/excel.jpg"/>
        <p:dataExporter type="xls"    target="invoice" fileName="BookDetails" />
    </h:commandLink>&#150;
 
    <h:commandLink id="pdf">
       <p:graphicImage  height="20" width="20" alt="pdf" value="#{expenseBean.str_Name}images/pdf.jpg"/>
        <p:dataExporter type="pdf"    target="invoice" fileName="BookDetails" />
    </h:commandLink>&#150;
 
    <h:commandLink id="csv">
       <p:graphicImage  height="20" width="20" alt="cvs" value="#{expenseBean.str_Name}images/csv.jpg"/>
        <p:dataExporter type="csv"    target="invoice" fileName="BookDetails" />
    </h:commandLink>&#150;
 
    <h:commandLink id="xml">
       <p:graphicImage  height="20"    width="20" alt="xml" value="#{expenseBean.str_Name}images/xml.jpg"/>
        <p:dataExporter type="xml"    target="invoice" fileName="BookDetails" />
    </h:commandLink>
     
      </td>
      </tr>
      </table>
            
        
        <p:dataTable id="invoice" var="invoice" value="#{invoiceBean.listInvoiceTransaction}"  style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" rows="12" paginator="true"  paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} "  rowsPerPageTemplate="10,20,30,40,50" 
          selection="#{invoiceBean.selectedInvoice}" rowKey="#{invoice.int_InvoiceTransactionID}" editable="true"  resizableColumns="true" paginatorPosition="top" paginatorAlwaysVisible="false">
       
                  <p:column  exportable="false"  selectionMode="single" style="width:35px;text-align:center" value="#{invoiceBean.int_InvoiceTransactionID}"/>   
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Organisation" />
                </f:facet>
                <h:outputText value="#{invoiceBean.str_Organisation}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="InvoiceNo" />
                </f:facet>
                <h:outputText value="#{invoice.int_InvoiceNo}" />
            </p:column>
            
            <p:column>
                <f:facet name="header">
                    <h:outputText value="End Date" />
                </f:facet>
                <h:outputText value="#{invoice.dat_DueDate}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Block" />
                </f:facet>
                <h:outputText value="#{invoice.str_Block}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Apartment" />
                </f:facet>
                <h:outputText value="#{invoice.str_ApartmentNo}" />
              
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Invoice Template" />
                </f:facet>
                <h:outputText value="#{invoice.str_InvoiceTemplate}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="SubTotal" />
                </f:facet>
                <h:outputText value="#{invoice.subTotal}" />
            </p:column>
          
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Tax" />
                </f:facet>
                <h:outputText value="#{invoice.taxAmount}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="TotalDue" />
                </f:facet>
                <h:outputText value="#{invoice.totalDue}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Status" />
                </f:facet>
                <h:outputText value="#{invoice.str_Status}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Balance" />
                </f:facet>
                <h:outputText value="#{invoice.totalBalance}" />
            </p:column>
             <p:column exportable="false">
                <f:facet name="header">
                    <h:outputText value="Action" />
                </f:facet>
               <center>
             
             
               
              <p:commandLink   process="invoice"  update=":form:multiInvoiceDetail1" oncomplete="PF('multiDueInvoiceDialog1').show()" action="#{invoiceBean.getInvoice(invoice.int_InvoiceTransactionID)}">
                  <h:graphicImage  height="20" width="20" alt="delete" value="#{expenseBean.str_Name}images/view.jpg" title="View"/> 
              </p:commandLink>
               &#150;
          <h:link outcome="dues.xhtml"
	   		 onclick="return confirm('Are you sure you want to delete #{dueTemplate.int_DueTemplateID}?');" >  
	   			<p:graphicImage  height="20" width="20" alt="delete" value="#{expenseBean.str_Name}images/delete.jpg" title="Delete"/> 
	   				<f:param name="int_InvoiceTransactionID" value="#{invoice.int_InvoiceTransactionID}" />
	   		</h:link>
	   		 </center>
            </p:column>
            </p:dataTable>
            </div>
            <p:dialog header="View Invoice" widgetVar="multiInvoiceDialog1"   showEffect="fade" hideEffect="explode" resizable="false" height="300" width="400">
      <p:outputPanel id="multiInvoiceDetail1" style="text-align:center;">   
      
 <div id="page3">
  
   <div class="gsTitleDiv">Template<br/><hr/></div>
              
         
            
   <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
            <tr>
           
            <td><h:outputLabel value="Invoice Template" /></td>
            
              <td>
              <h:outputText value="#{invoiceBean.invoice1.str_InvoiceTemplate}"/>
             </td>
            <td><h:outputLabel value="Included Charges"  /></td>
            <td><p:dataTable id="due" var="due" value="#{invoiceBean.dueList}" style="width:500px">
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Due" />
                </f:facet>
                 <h:outputText value="#{due.str_DueTemplate}" />
            </p:column>
           
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Tax Applied" />
                </f:facet>
                 <h:outputText value="#{due.str_TaxTemplate}">
                
                  </h:outputText>
            </p:column>
            </p:dataTable>
          </td>
  
  </tr>
  </table>
 </div>
  <div id="page3">
  
   <div class="gsTitleDiv">Due Details<br/><hr/></div>
    
  <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
   <tr>
      <td><h:outputLabel value="Bill Period:" /></td>
      <td><h:outputText value="#{invoiceBean.invoice1.str_BillPeriod}"/></td>
       <td><h:outputLabel value="Year:" /></td>
       <td><h:outputText value="#{invoiceBean.invoice1.int_Year}"/></td>
      </tr>
      <tr>
       <td>  <h:outputText  value="Invoice Date" /></td>
            
           <td>  <h:outputText id="dat_InvoiceDate1" value="#{invoiceBean.invoice1.dat_InvoiceDate}" /> </td>
           <td>  <h:outputText  value="Due Date" /></td>
           <td>  <h:outputText id="dat_DueDate1" value="#{invoiceBean.invoice1.dat_DueDate}"/> </td>
          
      </tr>
       <tr><th colspan="3">Apartment Details</th></tr>
       <tr>
       <td><h:outputLabel value="Block:" /></td>
       <td><h:outputText value="#{invoiceBean.invoice1.str_Block}"/></td>
       <td><h:outputLabel value="Apt.No:" /></td>
       <td><h:outputText value="#{invoiceBean.invoice1.str_ApartmentNo}"/></td>
       </tr>
   </table>
 </div>
 
   <div id="page3"> 
   <div class="gsTitleDiv">Invoice Details<br/><hr/></div>
   
  <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
       <tr>
        <td><h:outputLabel value="InvoiceNo.:" /></td>
       <td><h:outputText value="#{invoiceBean.invoice1.int_InvoiceNo}"/></td>
        <td><h:outputLabel value="Status:" /></td>
         <td><h:outputText value="#{invoiceBean.invoice1.str_Status}"/></td>
       </tr>
       <tr>
       </tr>
       
     
  
   <table   style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px;border:1px solid #DADADA ;">
    <tbody>
    <tr>
    <td style="width:440px;height:20px;background:#0E94F9;color:#fff;padding-left:5px;line-height:25px;">
    <strong>Item</strong>
    </td>
     <td style="width:200px;height:20px;background:#0E94F9;color:#fff;padding-left:5px;line-height:25px;">
    <strong></strong>
    </td>
    <td style="width:350px;background:#0E94F9;color:#fff;line-height:25px;" align="right">
    <strong>Amount</strong>
    </td>
    <td style="width:220px;background:#0E94F9;color:#fff;line-height:20px;padding-right:5px;" align="right">
    <strong>Tax Applied</strong>
    <br/>
    <span style="font-size:10px;">(Tax calculated below)</span>
    </td>
    </tr>
    
     <ui:repeat value="#{invoiceBean.transaction2}" var="dues" varStatus="status" style="width:600px"> 
    
    <tr style="line-height:20px;"><td style="padding-left:5px;width:440px;">#{dues.str_DueTemplate}</td>
     <td align="left" style="width:200px;"/>
    <td align="right" style="width:250px;"><ui:repeat value="#{invoiceBean.totalAmounts}" var="account">
   
    <h:outputText value="#{account}" /><br/>
  
     </ui:repeat>
   </td>
  
    <td align="right" style="padding-right:5px;width:320px;">#{dues.str_TaxTemplate} </td>
    </tr>
    <tr>
    <td colspan="4" style="border-bottom:1px solid #DADADA ;"></td>
    </tr>
 
   </ui:repeat>
  
    <tr style="line-height:25px;">
     <td align="left" style="width:200px;"/>
  
    <td style="padding-left:10px;width:200px;line-height:30px;color:#E17009;">SubTotal</td>
    <td align="right" style="width:250px;color:#E17009;">#{invoiceBean.subTotal}</td>
    </tr>
    <tr></tr>
     <ui:repeat value="#{invoiceBean.transaction2}" var="dues" varStatus="status" style="width:600px">  
    <tr>
    <td colspan="4" style="border-bottom:1px solid #DADADA ;"></td>
    </tr>
     <tr style="line-height:25px;">
    
     <td align="right" style="padding-right:5px;width:320px;"></td>
     </tr>
     <tr style="line-height:25px;">
     <td align="right" style="width:200px;"/>
     <td align="right">#{dues.str_TaxTemplate} &nbsp;(#{invoiceBean.taxAmount}%)</td>
     <td align="right">#{invoiceBean.taxAmount1}</td>
     </tr>
   </ui:repeat>  
  
   
   
 
  <tr>
   <tr>
    <td colspan="4" style="border-bottom:1px solid #DADADA ;"></td>
    </tr>
  <td/>
  <td style="height:20px;color:#E17009;" align="right">Total Due</td><td align="right" style="width:250px;color:#E17009;">#{invoiceBean.totalDue}</td><td align="right" style="padding-right:5px;width:320px;"></td>
  </tr>
    </tbody>
    </table>
   
   
    
   
   
 
  
         
   
    <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
       <tr><th colspan="3">Payment Details</th></tr>
       <tr>
        <td><h:outputLabel value="Paid Amount:" /></td>
       <td><h:outputText value="#{invoiceBean.selectedInvoice.totalDue}"/></td>
        <td><h:outputLabel value="Balance Amount:" /></td>
       <td><h:outputText value="#{invoiceBean.selectedInvoice.totalBalance}"/></td>
       </tr>
       </table>
 
  </table>
  </div>
 
       <h:panelGroup style="display:block; text-align:left"> 
         <tr>
                 
           <td><a href="invoice.xhtml">>>Back to Grid</a></td>
           </tr>
           </h:panelGroup>
          
            
           
          
         
          
            
      </p:outputPanel>
      </p:dialog>
      
         
        
        </h:form>
        </body>
        </ui:define>
        </ui:composition>