<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="#{expenseBean.str_Name}include/templates/template1.xhtml">
	<ui:define name="content">
<h:head>
    <title>Invoice  Form</title>
   <style type="text/css">
         input[type=text] 
          {
           
           height:25px;
           weight:250px;
          }
          select
          {
           height:25px;
           weight:250px;
          }
      </style>	
</h:head>
<table cellpadding="0" cellspacing="0" border="1" width="100%" class="src">
		<tbody>
			<tr>
				<td> 
					<img src="#{expenseBean.str_Name}images/invoice1.jpg" height="50" width="50"></img> <span class="title">Invoice</span>
				</td>
			</tr>
		</tbody>
	</table>
<body  bgcolor="pink">
  <h:form id="form">
  <div id="page3">
   <table   style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
   <tr> 
     <h:panelGroup id="performed"  >
           
              <td><h:outputLabel value="Organisation:" /></td>
              <td><p:selectOneMenu id="str_Organisation" value="#{invoiceBean.str_Organisation}" valueChangeListener="#{invoiceBean.organisationChangeListener}" style="width:150px">
                   <f:selectItem itemLabel="Select" itemValue="" noSelectionOption="true"/>
                  <f:selectItem itemLabel="#{invoiceBean.str_Organisation}" itemValue="#{invoiceBean.str_Organisation}"/>
                    <p:ajax event="change" update="str_Block" process="str_Organisation"/>
                 </p:selectOneMenu>
             </td>
             <p:spacer width="40" height="20"/>
             <td><h:outputText  value="Block:" /></td>
               <td><p:selectOneMenu id="str_Block" value="#{invoiceBean.str_Block}"  valueChangeListener="#{invoiceBean.blockChangeListener}"   style="width:150px">
                  <f:selectItem itemLabel="Select" itemValue="" noSelectionOption="true"/>
                   <f:selectItems value="#{invoiceBean.str_Blocks}" />
                    <p:ajax event="change" update="str_ApartmentNo" process="str_Block" partialSubmit="true" />
                 </p:selectOneMenu>
             </td>
              <p:spacer width="40" height="20"/>
             <td><h:outputText  value="Apartment:" /></td>
               <td><p:selectOneMenu id="str_ApartmentNo" value="#{invoiceBean.str_ApartmentNo}"  style="width:150px">
                  <f:selectItem itemLabel="Select" itemValue="" noSelectionOption="true"/>
                     <f:selectItems value="#{invoiceBean.str_BlockNo}" />
                 </p:selectOneMenu>
                 </td>
                  <p:spacer width="40" height="20"/>
                 <td><h:outputText  value="Status:" /></td>
                 <td><p:selectOneMenu id="str_Status" value="#{invoiceBean.str_Status}"  style="width:150px">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                   <f:selectItem  itemLabel="Paid" itemValue="Paid" />
                   <f:selectItem  itemLabel="Partial" itemValue="Partial" />
                    <f:selectItem  itemLabel="Due" itemValue="Due" />
                
                    <f:selectItem  itemLabel="Processing" itemValue="Processing" />
                 </p:selectOneMenu>
             </td>
            
             </h:panelGroup>
            </tr>
            <tr>
             <h:panelGroup id="aa">
            
              <td><h:outputLabel value="Invoice Date:" /></td>
              <td><p:selectOneMenu id="dat_InvoiceDate" value="#{invoiceBean.dat_InvoiceDate}"  style="width:150px">
                   <f:selectItems value="aaa" />
                 </p:selectOneMenu>
             </td>
              <p:spacer width="40" height="20"/>
             <td><h:outputText  value="Template:" /></td>
               <td><p:selectOneMenu id="str_InvoiceTemplate" value="#{invoiceBean.str_InvoiceTemplate}"  style="width:150px">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                   <f:selectItems value="#{invoiceBean.listInvoiceName}" />
                 </p:selectOneMenu>
             </td>
              <p:spacer width="40" height="20"/>
             <td><h:outputText  value="Period" /></td>
               <td><p:selectOneMenu id="str_BillPeriod" value="#{invoiceBean.str_BillPeriod}"  style="width:150px">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                 <f:selectItem itemLabel="JAN" itemValue="JAN"/>
                     <f:selectItem itemLabel="FEB" itemValue="FEB"/>
                       <f:selectItem itemLabel="MAR" itemValue="MAR"/>
                        <f:selectItem itemLabel="APR" itemValue="APR"/>
                          <f:selectItem itemLabel="MAY" itemValue="MAY"/>
                     <f:selectItem itemLabel="JUN" itemValue="JUN"/>
                       <f:selectItem itemLabel="JUL" itemValue="JUL"/>
                        <f:selectItem itemLabel="AUG" itemValue="AUG"/>
                          <f:selectItem itemLabel="SEP" itemValue="SEP"/>
                     <f:selectItem itemLabel="OCT" itemValue="OCT"/>
                       <f:selectItem itemLabel="NOV" itemValue="NOV"/>
                        <f:selectItem itemLabel="DEC" itemValue="DEC"/>
                 </p:selectOneMenu>
                 </td>
                  <p:spacer width="40" height="20"/>
                 <td><h:outputText  value="Year" /></td>
               <td><p:selectOneMenu id="int_Year" value="#{invoiceBean.int_Year}"  style="width:150px">
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                  <f:selectItem  itemLabel="2013" itemValue="2013" />
                   <f:selectItem  itemLabel="2014" itemValue="2014" />
                    <f:selectItem  itemLabel="2015" itemValue="2015" />
                   <f:selectItem  itemLabel="2016" itemValue="2016" />
                    <f:selectItem  itemLabel="2017" itemValue="2017" />
                </p:selectOneMenu>
             </td>
            
             </h:panelGroup>
             <p:spacer width="40" height="20"/>
            <td><p:commandButton id="priya" value="Go" action="#{invoiceBean.getListInvoiceTransaction()}" update="invoice"/></td>
                 
          </tr>
          </table>
          </div>
          <div id="page3"> 
	  <div class="gsTitleDiv">List Of Invoice<br/><hr/></div>
           <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
          <tr><td>  <p:button  style="width:120px;height:25px" icon="ui-icon-pencil" value="Create New" outcome="createnewinvoice.xhtml"/>&#150; &#150;<p:button  style="width:120px;height:25px" update="invoice" process="invoice" outcome="viewinvoice.xhtml"   icon="ui-icon-search" value="View"  />
								&#150; &#150;<p:commandButton  style="width:120px;height:25px" icon="ui-icon-trash" value="Delete Selected" />&#150; &#150;<p:commandButton style="width:120px;height:25px" icon="ui-icon-refresh"  value="Refresh" />&#150; &#150;<p:menuButton style="width:120px;height:25px"  value="Action" id="aa44">
           <p:menuitem value="Record Payment" />
         
           <p:menuitem id="hyg" value="Quick Payment"  icon="ui-icon-disk" update=":form:multiVendorDetail" oncomplete="PF('multiVendorDialog').show()">
           
           </p:menuitem>
           <p:menuitem value="Export To Excel" icon="ui-icon-arrowrefresh-1-w" style="width:150px"/>
           <p:menuitem value="Notify By Mail"/>
         </p:menuButton>
           <h:commandLink id="excel">
       <p:graphicImage  height="20" width="20" alt="excel" value="#{expenseBean.str_Name}images/excel.jpg"/>
        <p:dataExporter type="xls"    target="DT" fileName="BookDetails" />
    </h:commandLink>&#150;
 
    <h:commandLink id="pdf">
       <p:graphicImage  height="20" width="20" alt="pdf" value="#{expenseBean.str_Name}images/pdf.jpg"/>
        <p:dataExporter type="pdf"    target="DT" fileName="BookDetails" />
    </h:commandLink>&#150;
 
    <h:commandLink id="csv">
       <p:graphicImage  height="20" width="20" alt="cvs" value="#{expenseBean.str_Name}images/csv.jpg"/>
        <p:dataExporter type="csv"    target="DT" fileName="BookDetails" />
    </h:commandLink>&#150;
 
    <h:commandLink id="xml">
       <p:graphicImage  height="20"    width="20" alt="xml" value="#{expenseBean.str_Name}images/xml.jpg"/>
        <p:dataExporter type="xml"    target="DT" fileName="BookDetails" />
    </h:commandLink>
     
      </td>
      </tr>
      </table>
            
        
        <p:dataTable id="invoice" var="invoice" value="#{invoiceBean.listInvoiceTransaction}"  style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" rows="12" paginator="true"  paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown} "  rowsPerPageTemplate="10,20,30,40,50" 
          selection="#{invoiceBean.selectedInvoice}" rowKey="#{invoice.int_InvoiceTransactionID}" editable="true"  resizableColumns="true" paginatorPosition="top" paginatorAlwaysVisible="false">
       
                  <p:column  exportable="false"  selectionMode="single" style="width:35px;text-align:center" />   
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Organisation" />
                </f:facet>
                <h:outputText value="#{invoice.str_Organisation}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="InvoiceNo" />
                </f:facet>
                <h:outputText value="#{invoice.int_InvoiceNo}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Period" />
                </f:facet>
                <h:outputText value="#{invoice.str_BillPeriod}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="End Date" />
                </f:facet>
                <h:outputText value="#{invoice.dat_DueDate}" />
            </p:column>
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Block" />
                </f:facet>
                <h:outputText value="#{invoice.str_Block}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Apartment" />
                </f:facet>
                <h:outputText value="#{invoice.str_ApartmentNo}" />
              
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Invoice Template" />
                </f:facet>
                <h:outputText value="#{invoice.str_InvoiceTemplate}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="SubTotal" />
                </f:facet>
                <h:outputText value="#{invoice.subTotal}" />
            </p:column>
          
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Tax" />
                </f:facet>
                <h:outputText value="#{invoice.taxAmount}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="TotalDue" />
                </f:facet>
                <h:outputText value="#{invoice.totalDue}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Status" />
                </f:facet>
                <h:outputText value="#{invoice.str_Status}" />
            </p:column>
             <p:column>
                <f:facet name="header">
                    <h:outputText value="Balance" />
                </f:facet>
                <h:outputText value="#{invoice.totalBalance}" />
            </p:column>
            </p:dataTable>
            </div>
          <p:dialog header="Quick payment Details" widgetVar="multiVendorDialog"   showEffect="fade" hideEffect="explode" resizable="false" height="300" width="400">
      <p:outputPanel id="multiVendorDetail" style="text-align:center;"> 
         <ui:repeat value="#{invoiceBean.selectedInvoice}" var="invoice1">
        <table>
       
    <tr>
            
             <td><h:outputLabel value="Account Name" /><font color="red" >*</font></td>
              <td><h:selectOneMenu id="accountName" value="#{invoiceBean.accountName}"  style="width:200px" >
                    <f:selectItem itemLabel="Select One" itemValue="" noSelectionOption="true"/> 
                   <f:selectItems value="#{invoiceBean.listAccountName}" />
                   
                </h:selectOneMenu>
             </td>
           
             </tr>
             <tr>
              <td><h:outputLabel value="Paid On" /><font color="red" >*</font></td>
              <td> <p:inputText id="dat1_InvoiceDate" value="#{invoiceBean.dat_InvoiceDate}" size="25"/> 
             </td>
             </tr>
             <tr>
            <td>  <h:outputText  value="Comments" /><font color="red" >*</font></td>
            <td>  <p:inputTextarea id="str_Description" rows="4" cols="30" value="#{templateBean.str_Description}" size="25"  /></td>
             </tr>
           
   </table>
   </ui:repeat>
    <br/>
   <h:panelGroup style="display:block; text-align:right">
     <tr>
                <td><h:commandButton id="submit" value="Confirm" action="#{invoiceBean.savePayment(invoice1.int_InvoiceTransactionID,invoice1.int_InvoiceNo)}" update="invoice" oncomplete="PF('multiVendorDialog').hide()"/></td>
                <td><h:commandButton id="cancel" value="Cancel" action="#{invoiceBean.cancelInvoice}" ajax="false"/></td>
            </tr>
    </h:panelGroup>
       </p:outputPanel>
        </p:dialog>
         <p:dialog header="View Invoice" widgetVar="multiInvoiceDialog1"     showEffect="explode" hideEffect="bounce" resizable="false" height="400" width="600">
        <p:outputPanel id="multiInvoiceDetail1" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{invoiceBean.selectedInvoice}" var="invoice1">
              <legend style="background-color:#438eb9; color:#fff;">Template
   </legend>
   <table cellpadding="20" cellspacing="10">
            <tr>
           
            <td><h:outputLabel value="Invoice Template" /></td>
            
              <td>
              <h:outputText value="#{invoice1.str_InvoiceTemplate}"/>
             </td>
            <td><h:outputLabel value="Included Charges"  /></td>
            <td><p:dataTable id="due" var="due" value="#{invoiceBean.dueList}" style="width:500px">
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Due" />
                </f:facet>
                 <h:outputText value="#{due.str_DueTemplate}" />
            </p:column>
           
            <p:column>
                <f:facet name="header">
                    <h:outputText value="Tax Applied" />
                </f:facet>
                 <h:outputText value="#{due.str_TaxTemplate}">
                
                  </h:outputText>
            </p:column>
            </p:dataTable>
          </td>
  
  </tr>
  </table>
 
  
    <legend style="background-color:#438eb9; color:#fff;">Due Details
   </legend>
   <table cellpadding="20" cellspacing="10">
   <tr>
      <td><h:outputLabel value="Bill Period:" /></td>
      <td><h:outputText value="#{invoice1.str_BillPeriod}"/></td>
       <td><h:outputLabel value="Year:" /></td>
       <td><h:outputText value="#{invoice1.int_Year}"/></td>
      </tr>
      <tr>
       <td>  <h:outputText  value="Invoice Date" /></td>
            
           <td>  <h:outputText id="dat_InvoiceDate" value="#{invoice1.dat_InvoiceDate}" size="25"/> </td>
           <td>  <h:outputText  value="Due Date" /></td>
           <td>  <h:outputText id="dat_DueDate" value="#{invoice1.dat_DueDate}" size="25"/> </td>
          
      </tr>
       <tr><th colspan="3">Apartment Details</th></tr>
       <tr>
       <td><h:outputLabel value="Block:" /></td>
       <td><h:outputText value="#{invoice1.str_Block}"/></td>
       <td><h:outputLabel value="Apt.No:" /></td>
       <td><h:outputText value="#{invoice1.str_ApartmentNo}"/></td>
       </tr>
   </table>
 
    <legend style="background-color:#438eb9; color:#fff;">Invoice Details
   </legend>
   <table>
       <tr>
        <td><h:outputLabel value="InvoiceNo.:" /></td>
       <td><h:outputText value="#{invoice1.int_InvoiceNo}"/></td>
        <td><h:outputLabel value="Status:" /></td>
         <td><h:outputText value="#{invoice1.str_Status}"/></td>
       </tr>
       <tr>
        <table cellpadding="0" cellspacing="0" style="width:598px;align:center; font-family:arial;font-size:14px;line-height:15px;border:1px solid #DADADA ;">
    <tbody>
    <tr>
    <td style="width:440px;height:20px;background:#0E94F9;color:#fff;padding-left:5px;line-height:25px;">
    <strong>Item</strong>
    </td>
    <td style="width:250px;background:#0E94F9;color:#fff;line-height:25px;" align="right">
    <strong>Amount</strong>
    </td>
    <td style="width:220px;background:#0E94F9;color:#fff;line-height:20px;padding-right:5px;" align="right">
    <strong>Tax Applied</strong>
    <br/>
    <span style="font-size:10px;">(Tax calculated below)</span>
    </td>
    </tr>
     <tr>
  
   
    <td colspan="3" style="border-bottom:1px solid #DADADA ;">
    </td>
    </tr>
     <ui:repeat value="#{invoiceBean.transaction}" var="dues" varStatus="status" style="width:600px"> 
    
    <tr style="line-height:25px;"><td style="padding-left:5px;width:440px;">#{dues.str_DueTemplate}</td>
    <td align="right" style="width:250px;">#{invoiceBean.totalAmounts}"
   </td>
    <td align="right" style="padding-right:5px;width:320px;">#{dues.str_TaxTemplate} </td>
    </tr>
    <tr>
    <td colspan="3" style="border-bottom:1px solid #DADADA ;"></td>
    </tr>
 
   </ui:repeat>
   
    <tr>
    <td style="padding-left:5px;width:440px;line-height:20px;" align="right">SubTotal</td>
    <td align="right" style="width:250px;">#{invoiceBean.subTotal}</td>
    </tr>
    <tr></tr>
     <ui:repeat value="#{invoiceBean.transaction}" var="dues" varStatus="status" style="width:600px">  
    
    <tr style="line-height:25px;">
     <td align="right" style="padding-right:5px;width:320px;"></td></tr><tr style="line-height:20px;"><td align="right">#{dues.str_TaxTemplate} &nbsp;&nbsp;(#{invoiceBean.taxAmount}%)</td><td align="right">#{invoiceBean.taxAmount1}</td>
     </tr>
     
  
   
   
  </ui:repeat>
  <tr>
   <tr>
    <td colspan="3" style="border-bottom:1px solid #DADADA ;"></td>
    </tr>
  <td style="height:20px;color:#E17009;" align="right">Total Due</td><td align="right" style="width:250px;color:#E17009;">#{invoiceBean.totalDue}</td><td align="right" style="padding-right:5px;width:320px;"></td>
  </tr>
    </tbody>
   
   </table>
    </tr>
   
     <table>
       <tr><th colspan="3">Payment Details</th></tr>
       <tr>
        <td><h:outputLabel value="Paid Amount:" /></td>
       <td><h:outputText value="#{invoice1.totalDue}"/></td>
        <td><h:outputLabel value="Balance Amount:" /></td>
       <td><h:outputText value="#{invoice1.totalBalance}"/></td>
       </tr>
       </table>
   </table>
   <br/> <br/>
  <h:panelGroup style="display:block; text-align:left"> 
         <tr>
                 
                 <td><p:commandButton id="cancel" value="Cancel" action="#{invoiceBean.cancel}" ajax="false"/></td>
           </tr>
           </h:panelGroup>
            </ui:repeat>
            
            </table>
        </p:outputPanel>
       
    </p:dialog>
        </h:form>
        </body>
        </ui:define>
        </ui:composition>