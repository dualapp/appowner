<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="include/templates/template.xhtml"
                xmlns:P="http://java.sun.com/jsf/html">
	 
	<h:head>

	<title></title>
	 <script src="JavaScript/ModalPopupWindow.js" type="text/javascript">
	 
	 </script>

 <style>
     body
        {
            font-family: Verdana;
            font-size: 10px;
         
        }
     
    </style>
     

 </h:head>
	 <h:form   >
	<h:body>
	<br/>
	<h:outputLabel value="Organisation:" /> 
               
              <p:selectOneMenu       style="width:100px">
              <f:selectItem itemLabel="#{expenseBean.str_OrganizationName}"  itemValue="#{expenseBean.str_OrganizationName}" />
                
                 </p:selectOneMenu><br/>
	 
                
           <table style="overflow:hidden;border:0pt none;width: 50%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"><tr><td>  
	    <p:commandButton process="DT" update="multiParkingSpaceDetail"   value="Create New" oncomplete="PF('multiParkingSpaceDialog').show()" />
	
	 &#150; &#150;  <p:commandButton process="DT" update="multiParkingSpaceDetail1" icon="ui-icon-search" value="View" oncomplete="PF('multiParkingSpaceDialog1').show()" />
       &#150; &#150; <p:commandButton process="DT" update="multiParkingSpaceDetail2" icon="ui-icon-pencil" value="Edit " oncomplete="PF('multiParkingSpaceDialog2').show()" />
       &#150; &#150;  <p:commandButton update="DT" process="DT" onclick="return confirm('Are you sure you want to delete ?');" action="#{vendorBean.deleteParkingSpace()}" icon="ui-icon-trash" value="Delete" />
       <h:commandButton  value="Refresh" />
         
     
     </td>
     </tr>
     </table>
	<legend  style="background-color:#438eb9; color:#fff;"> Parking Space</legend>
                
             <p:dataTable   id="DT"  
               
               rows="3"   paginator="true"  paginatorPosition="bottom"   resizableColumns="true"  style="overflow:hidden;border:0pt none;width: 50%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        rowsPerPageTemplate="1,2,3"  var="ps"  value= "#{expenseBean.parkingSpaceList}" selection="#{expenseBean.parkingSpaceList1}" rowKey="#{ps.int_ParkingId}"  >
	 
	 
	  <p:column     exportable="false"  selectionMode="multiple" style="width:35px;text-align:center">
         
             </p:column>
          <p:column headerText="Organization">
                <h:outputText value="#{ps.str_OrganizationName}" /> 
                   
               
          </p:column>
          <p:column headerText="Parking Id">
            
                 <h:outputText value="#{ps.int_ParkingId}" /> 
          </p:column>
          
          <p:column headerText="Parking slot">
               <h:outputText value="#{ps.str_ParkingSlot}" /> 
          </p:column>
          
	  
            
       
	 </p:dataTable>
	  <p:dialog header="Create Parking Space" widgetVar="multiParkingSpaceDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="200" width="400">
        <p:outputPanel id="multiParkingSpaceDetail" style="text-align:center;">
        <table>
	<tr><th>
	<h:outputText  value="Organisation:" /> </th>
              
              <td><p:selectOneMenu       style="width:100px">
              <f:selectItem itemLabel="#{expenseBean.str_OrganizationName}"  itemValue="#{expenseBean.str_OrganizationName}" />
                
                 </p:selectOneMenu></td></tr>
                 
<tr><th><h:outputText value="parkingSlot"/></th>
	<td><h:inputText  id="Parkingslot" required="true" requiredMessage="plz Enter ParkingSlot" value="#{expenseBean.str_ParkingSlot}">
	<p:ajax event="blur" update="ParkingSlotMsg" />
	</h:inputText>
	</td>
	<td><p:message  id="ParkingSlotMsg" for="Parkingslot" display="text"/></td>
	</tr>
	<tr><td></td><td><h:commandButton   styleClass="btn" id="submit"  value="Submit" onclick="EnrollLaterClick()"   action="#{expenseBean.saveParking}" /> </td></tr> 
	 <script>
	 
        function EnrollNowClick() {
            PassValueToParentWindow();
            window.parent.modalWin.CallCallingWindowFunction(0, 'User Enrolled Scucessfully');
           
        }
        function EnrollLaterClick() {
         
            window.opener.reload(true);
            window.close();
        }
 
    </script>
    
    </table>
    
    
           </p:outputPanel>
           </p:dialog>
             <p:dialog header="Edit Parking Space Details" widgetVar="multiParkingSpaceDialog2"     showEffect="explode" hideEffect="bounce" resizable="false" height="300" width="400">
        <p:outputPanel id="multiParkingSpaceDetail2" style="text-align:center;">
          
           <table>
               
            <ui:repeat value="#{expenseBean.parkingSpaceList1}" var="ps1">
             <tr>
 <th>
	<h:outputText  value="Organisation:" /> </th>
    <td>
    <h:inputText value="#{ps1.str_OrganizationName}"/></td>
    </tr>
    <tr>
 <th>
	<h:outputText  value="Parking slot:" /> </th>
    <td>
    <h:inputText value="#{ps1.str_ParkingSlot}"/></td>
    </tr>
     
    </ui:repeat>
     <tr><td><h:commandButton value="update"  action="#{expenseBean.updateParkingSpace(ps1)}"/></td> <td><h:commandButton action="parkingspace" value="Cancel"/></td></tr>
            </table>
    </p:outputPanel>
    </p:dialog>
     <p:dialog header="  Parking Space Details" widgetVar="multiParkingSpaceDialog1"     showEffect="explode" hideEffect="bounce" resizable="false" height="300" width="400">
        <p:outputPanel id="multiParkingSpaceDetail1" style="text-align:center;">
          
           <table>
               
            <ui:repeat value="#{expenseBean.parkingSpaceList1}" var="ps1">
             <tr>
 <th>
	<h:outputText  value="Organisation:" /> </th>
    <td>
    <h:outputText value="#{ps1.str_OrganizationName}"/></td>
    </tr>
    <tr>
 <th>
	<h:outputText  value="Parking slot:" /> </th>
    <td>
    <h:outputText value="#{ps1.str_ParkingSlot}"/></td>
    </tr>
     
    </ui:repeat>
    </table>
    </p:outputPanel>
    </p:dialog>
	</h:body>
	</h:form>
	 

</html>