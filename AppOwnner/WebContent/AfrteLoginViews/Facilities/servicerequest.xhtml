<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

 <ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="#{expenseBean.str_Name}include/templates/#{expenseBean.templateIndicator}">
	<ui:define name="content">

	
	<h:head>

	 
	 <script src="JavaScript/ModalPopupWindow.js" type="text/javascript">
	 
	 </script>

 <style type="text/css">
 .ui-growl {
 position:absolute;
        
         width:400px;
         left:50%;
         top:200px;
         margin-left:-200px; 

}
</style>
   
 </h:head>
   <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px;margin-top:5px" class="src">
		<tbody>
			<tr>
				<td> 
					<img src="#{expenseBean.str_Name}images/started.jpg" height="50" width="50"></img> <span class="title">Service Request</span>
				</td>
			</tr>
		</tbody>
	</table>
  <h:form id="form">
   <p:growl id="ui-growl" globalOnly="true" sticky="true" />
                 <div id="page3"> 
  <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"><tr><th>
               <p:outputLabel value="Organisation:" /> </th>
             <td> <h:selectOneMenu value="#{requestScopeBean.str_OrganizationName}">&nbsp;
             <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="#{loginBean.str_ApartmentName}"  itemValue="#{loginBean.str_ApartmentName}" />
    </h:selectOneMenu></td>
   <th><p:outputLabel value="VendorCategory"/></th>  <td><h:selectOneMenu value="#{requestScopeBean.str_VendorType}">
   <f:selectItem itemLabel="Select One" itemValue="" />
    <f:selectItems value="#{vendorBean.str_VendorTypeList}"/></h:selectOneMenu>
    </td>
    <th><p:outputLabel value="Status"></p:outputLabel></th>
    <td> <h:selectOneMenu   value="#{requestScopeBean.str_Status}"> 
    <f:selectItem itemLabel="Select One" itemValue="" />
              <f:selectItem itemLabel="All"  itemValue="All" />
              <f:selectItem itemLabel="open"  itemValue="open" />
              <f:selectItem itemLabel="Assigned"  itemValue="Progress" />
              <f:selectItem itemLabel="Closed"  itemValue="RequestClosed" />
            </h:selectOneMenu>
            </td>
   
     </tr>
    <tr><th><p:outputLabel value="Period"></p:outputLabel></th>
    <td><h:selectOneMenu id="car" value="#{requestScopeBean.str_Period}" valueChangeListener="#{requestScopeBean.accountchangeListener3}" >
           
            <f:selectItems value="#{requestScopeBean.dates}" />
              <p:ajax event="click" partialSubmit="true"  update="date" process="car"/>
       </h:selectOneMenu>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
                  <p:calendar  id="date"  required="true" requiredMessage="Please enter Duration" navigator="true" pattern="dd-MM-yyyy"   value="#{requestScopeBean.dat_ToDate}">
                  </p:calendar>&nbsp; &nbsp; &nbsp;</td>
     
     <td></td><td><h:commandButton  icon="ui-icon-search" update="DT" value="Go" action="#{requestScopeBean.getListServiceRequest}"/></td>
    </tr>
    </table> 
   </div>
   
        <div id="page3">  
           <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"><tr><td>  <p:button    outcome="createnewservicerequest"  icon="ui-icon-plus"  style="width:120px;height:25px" value="create new" />  &#150; &#150;
	   &#150; &#150; <p:menuButton style="width:120px;height:25px" value="Action">
        <p:menuitem value="Assign Selected" rendered="#{expenseBean.isEnable}" process="DT" update=":form:pd2" icon="ui-icon-tick"   oncomplete="PF('pDialog2').show()" />
        <p:menuitem value="close Selected" process="DT" update=":form:pd3" icon="ui-icon-tick"   oncomplete="PF('pDialog3').show()"/>
        <p:menuitem value="View Chart" />
         <p:menuitem value="View Summary" />
         <p:menuitem value="Export To Excel"/>
        </p:menuButton>
	       &#150; &#150; <p:commandButton  style="width:120px;height:25px" rendered="#{expenseBean.isEnable}" process="DT" update=":form:pd" icon="ui-icon-pencil" value="Edit " oncomplete="PF('pDialog').show()" />
	       &#150; &#150; <p:commandButton  style="width:120px;height:25px" process="DT" update=":form:pd1"  icon="ui-icon-info" value="View " oncomplete="PF('pDialog1').show()" />
	     &#150; &#150;   <p:commandButton  style="width:120px;height:25px"  rendered="#{expenseBean.isEnable}" update="DT" process="DT" onclick="return confirm('Are you sure you want to delete ?');" action="#{requestScopeBean.deleteServices()}" icon="ui-icon-trash" value="Delete" />
	 &#150; &#150;   <p:commandButton style="width:120px;height:25px" icon="ui-icon-refresh"    onclick="javascript:history.go(0);" value="Refresh" />
	&#150; &#150;<h:commandLink id="excel">
       <p:graphicImage  height="20" width="20" alt="excel" value="#{expenseBean.str_Name}images/excel.jpg"/>
        <p:dataExporter type="xls"    target="DT" fileName="Service Request" />
    </h:commandLink>
 
   &#150; &#150; <h:commandLink id="pdf">
       <p:graphicImage  height="20" width="20" alt="pdf" value="#{expenseBean.str_Name}images/pdf.jpg"/>
        <p:dataExporter type="pdf"    target="DT" fileName="Service Request" />
    </h:commandLink>
 
   &#150; &#150; <h:commandLink id="csv">
       <p:graphicImage  height="20" width="20" alt="cvs" value="#{expenseBean.str_Name}images/cvs.png"/>
        <p:dataExporter type="csv"    target="DT" fileName="Service Request" />
    </h:commandLink>
 
   &#150; &#150; <h:commandLink id="xml">
       <p:graphicImage  height="20"    width="20" alt="xml" value="#{expenseBean.str_Name}images/xml.png"/>
        <p:dataExporter type="xml"    target="DT" fileName="Service Request" />
    </h:commandLink>
	</td></tr></table>
                
        <p:dataTable id="DT" rows="3"   paginatorPosition="bottom" style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" paginator="true" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
        rowsPerPageTemplate="1,2,3"   resizableColumns="true"      var="sr"  value="#{requestScopeBean.listServiceRequest}"  selection="#{requestScopeBean.selectedServices}" rowKey="#{sr.int_ServiceRequestId}"> 
                
	 <p:column     exportable="false"  selectionMode="multiple" style="width:35px;text-align:center">
         
             </p:column>
           	  
	 <p:column headerText="Organization">
                <p:outputLabel value="#{loginBean.str_ApartmentName}" /> 
            
	 </p:column>
	 
	 <p:column headerText="Created On">
                <p:outputLabel value="#{sr.dat_OpenDate}" /> 
            
	 </p:column>
	 <p:column headerText="Category">
                <p:outputLabel value="#{sr.str_VendorType}" /> 
            
	 </p:column>
	 <p:column headerText="Title">
                <p:outputLabel value="#{sr.str_Title}" /> 
            
	 </p:column>
	 <p:column headerText="Status">
                <p:outputLabel value="#{sr.str_Status}" /> 
            
	 </p:column>
	 
	 <p:column headerText="Flat">
                <p:outputLabel value="#{sr.str_Flat}" /> 
            
	 </p:column>
	 </p:dataTable>
	   <p:dialog header="Edit Service Details" widgetVar="pDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="500" width="400">
        <p:outputPanel id="pd" style="text-align:center;">
          
               
            <ui:repeat value="#{requestScopeBean.selectedServices}" var="sr1">
             <table>
             <tr>
 <th>
    <p:outputLabel value="Organization Name:"/></th>
    <td>
    <p:inputText value="#{expenseBean.str_OrganizationName}"/></td>  
    </tr>
    <tr>
 <th>
    <p:outputLabel value="Service category:"/></th>
    <td>
    <p:inputText value="#{sr1.str_VendorType}"/></td>  
    </tr>
    <tr>
 <th>
    <p:outputLabel value="Created On:"/></th>
    <td>
     <p:calendar  id="odate"  required="true" requiredMessage="Please enter Duration" navigator="true" pattern="dd-MM-yyyy"   value="#{requestScopeBean.dat_ToDate}"/>
               
    </td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="Title:"/></th>
    <td>
    <p:inputText value="#{sr1.str_Title}"/></td>  
    </tr>

  <tr>
 <th>
    <p:outputLabel value="Status:"/></th>
    <td>
    <p:inputText value="#{sr1.str_Status}"/></td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="Flat:"/></th>
    <td>
    <p:inputText value="#{sr1.str_Flat}"/></td>  
    </tr>
    </table>
     <div>
              <hr/>
    <p:commandButton value="Update" styleClass="btn" action="#{requestScopeBean.updateOneServiceRequest(sr1)}">
    
    </p:commandButton>
    &#150; &#150; <p:commandButton   styleClass="btn" onclick="pDialog.hide()"   value="Cancel"    action="servicerequest.xhtml">
	  <f:ajax execute="@this" event="click"  render="@form"/>
	  </p:commandButton>
	   </div>
    
             </ui:repeat>
             
             </p:outputPanel>
             </p:dialog>
             <p:dialog header="Service Details" widgetVar="pDialog1"     showEffect="explode" hideEffect="bounce" resizable="false" height="300" width="400">
        <p:outputPanel id="pd1" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{requestScopeBean.selectedServices}" var="sr1">
            
            <tr>
 <th>
    <p:outputLabel value="Organization Name:"/></th>
    <td>
     <p:outputLabel value="#{expenseBean.str_OrganizationName}"/></td>  
    </tr>
    <tr>
 <th>
    <p:outputLabel value="Service category:"/></th>
    <td>
     <p:outputLabel value="#{sr1.str_VendorType}"/></td>  
    </tr>
    <tr>
 <td>
    <p:outputLabel value="Created On:"/></td>
    <td>
     <p:outputLabel value="#{sr1.dat_OpenDate}"/></td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="Title:"/></th>
    <td>
     <p:outputLabel value="#{sr1.str_Title}"/></td>  
    </tr>

  <tr>
 <th>
    <p:outputLabel value="Status:"/></th>
    <td>
    <p:outputLabel value="#{sr1.str_Status}"/></td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="Flat:"/></th>
    <td>
     <p:outputLabel value="#{sr1.str_Flat}"/></td>  
    </tr>
    
            </ui:repeat>
            </table>
            </p:outputPanel>
            </p:dialog>
            
             
              <p:dialog header="Service  Details" widgetVar="pDialog2"     showEffect="explode" hideEffect="bounce" resizable="false" height="100" width="300">
        <p:outputPanel id="pd2" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{requestScopeBean.selectedServices}" var="sr1">
            
            <tr><th><p:outputLabel value="Selected request will be assign click yes to confirm"/></th></tr>
           <tr><td><p:selectBooleanCheckbox      value="#"/> <p:outputLabel value="Send Email to creator"/> </td></tr>
           <tr><td><p:selectBooleanCheckbox     value="#"/><p:outputLabel value="Send Email to creator"/></td></tr>
           <tr><td><h:commandButton value="yes" action="#{requestScopeBean.assignRequestedService(sr1)}"/> 
           <h:commandButton value="No" action="servicerequest.xhtml"/></td>
           </tr>
            </ui:repeat>
            </table>
            </p:outputPanel>
            </p:dialog>
            <p:dialog header="Service  Details" widgetVar="pDialog3"     showEffect="explode" hideEffect="bounce" resizable="false" height="100" width="300">
        <p:outputPanel id="pd3" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{requestScopeBean.selectedServices}" var="sr1">
            
            <tr><th><p:outputLabel value="Selected request will be closed click yes to confirm"/></th></tr>
           <tr><td><p:selectBooleanCheckbox      value="#"/> <p:outputLabel value="Send Email to creator"/> </td></tr>
           <tr><td><p:selectBooleanCheckbox     value="#"/><p:outputLabel value="Send Email to creator"/></td></tr>
           <tr><td><h:commandButton value="yes" action="#{requestScopeBean.closeRequestedService(sr1)}"/> 
           <h:commandButton value="No" action="servicerequest.xhtml"/></td>
           </tr>
            </ui:repeat>
            </table>
            </p:outputPanel>
            </p:dialog>
             </div>
    </h:form>
    
	</ui:define>
	</ui:composition>
 