 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://java.sun.com/jsf/core"
	template="#{expenseBean.str_Name}include/templates/template1.xhtml">
	<ui:define name="content">
 <h:head>
    <title>Expense</title>
   <style>
 .ui-growl {
 position:absolute;
        
         width:400px;
         left:50%;
         top:200px;
         margin-left:-200px; 

}
.ui-growl-item-container.ui-state-highlight {
    border-color: pink;
}
        div[id="form:ui-growl_container"] > div{
        
            background-color: green !important;
        }
</style>
      
</h:head>
<table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px;margin-top:5px" class="src">
		<tbody>
			<tr>
				<td> 
					<img src="#{expenseBean.str_Name}images/expense.jpg" height="50" width="50"></img> <span class="title">Expense</span>
				</td>
			</tr>
		</tbody>
	</table>
	<h:body>
  <h:form id="form">
  <p:growl id="ui-growl" globalOnly="true" />
  <div id="page3">
   
       <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px"><tr>
         
              <th><p:outputLabel value="Organisation:" /></th>
              <td><h:selectOneMenu     value="#{expenseBean1.str_OrganizationName}" >
               
                <f:selectItem itemLabel="#{expenseBean1.str_OrganizationName}"  itemValue="#{expenseBean1.str_OrganizationName}"/>
                   
                 </h:selectOneMenu>
             </td>
            
             <th><p:outputLabel  value="Expense Type:" /></th>
               <td><h:selectOneMenu   value="#{expenseBean1.str_ExcepenseType}" >
                  <f:selectItem itemLabel="All" itemValue="All" />
                   <f:selectItem itemLabel="Expense" itemValue="Expense"/>
                    <f:selectItem itemLabel="Estimate" itemValue="Estimate"/>
                   
                 </h:selectOneMenu>
             </td>
              
             <th><p:outputLabel  value="Expense Category:" /></th>
               <td><h:selectOneMenu   value="#{expenseBean1.str_ExpenseCategory}"  >
                  <f:selectItem itemLabel="All" itemValue="" noSelectionOption="true" />
                   <f:selectItem itemLabel="Expense" itemValue="Expense"  />
                    
                 </h:selectOneMenu>
                 </td></tr>
                           
             
            
             <tr> <th><p:outputLabel value="Duration:" /></th>
              <td><p:calendar  id="date"  required="true" requiredMessage="Please enter Duration" navigator="true" pattern="dd-MM-yyyy"   value="#{expenseBean1.date_Duration}">
                  </p:calendar>&nbsp; &nbsp; &nbsp;
             </td>
               
             <th><p:outputLabel  value="Asset Category:" /></th>
               <td><h:selectOneMenu id="assetcatname"  value="#{expenseBean1.str_AssetCategoryType}" valueChangeListener="#{expenseBean1.assetCatNameListener}" >
                  <f:selectItem itemLabel="All" itemValue="All" noSelectionOption="true" />
                 
                   <f:selectItems  value="#{expenseBean1.str_AssetCatNameList}" />
                   <p:ajax event="change" update="assetname" process="assetcatname"/>
                 </h:selectOneMenu>
             </td>
               
             <th><p:outputLabel  value="Asset Name" /></th>
               <td><h:selectOneMenu  id="assetname" value="#{expenseBean1.str_AssetName}"  valueChangeListener="#{expenseBean1.assetNameListener}" >
                  <f:selectItem itemLabel="All" itemValue="All" noSelectionOption="true" />
                  <f:selectItems  value= "#{expenseBean1.str_AssetNameList}"  />
                  
                  
                 </h:selectOneMenu>
                 </td></tr>
                 <tr> <th></th><td></td><th></th><td></td><td><th>
                 <p:commandButton  icon="ui-icon-search" update="DT"  value="Go" action="#{expenseBean1.getExpenseList}"/></th> </td></tr>
                 </table>
                  </div>
                  <div id="page3">
            
            <table style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px">
            <tr><td>
          <p:button icon="ui-icon-plus"  style="width:120px;height:25px"  outcome="createExpenses" value="Create New"/>   &#150; &#150;  <p:commandButton style="width:120px;height:25px" icon="ui-icon-refresh"    onclick="javascript:history.go(0);" value="Refresh" />&#150; &#150;
          <p:menuButton  value="Action">
        <p:menuitem value="Approve Selected"   process="DT" update=":sMsg" icon="ui-icon-tick"   oncomplete="PF('pDialog2').show()" />
        <p:menuitem value="Reject Selected" process="DT" update=":sMsg1" icon="ui-icon-tick"   oncomplete="PF('pDialog3').show()"/>
        <p:menuitem value="View Chart" />
         <p:menuitem value="View Summary"/>
          
         <p:menuitem value="Export To Excel"/>
        </p:menuButton>
       
         &#150; &#150;  <p:commandButton style="width:120px;height:25px"  process="DT" update=":form:multiExpenseDetail1" icon="ui-icon-info" value="View" oncomplete="PF('multiExpenseDialog1').show()" ajax="#{expenseBean1.indicate}" id="btn"  action="#{expenseBean1.select()}" />
       &#150; &#150; <p:commandButton  style="width:120px;height:25px" process="DT" update=":form:multiExpenseDetail" icon="ui-icon-pencil" value="Edit " oncomplete="PF('multiExpenseDialog').show()"  ajax="#{expenseBean1.indicate}" id="btn1"  action="#{expenseBean1.select1()}"/>
       &#150; &#150;  <p:commandButton style="width:120px;height:25px"  update="DT" process="DT" onclick="return confirm('Are you sure you want to delete ?');" action="#{expenseBean1.deleteSelectedExpenses()}"  id="btn2" icon="ui-icon-trash" value="Delete" />
      &#150; &#150;   <h:commandLink id="excel">
       <p:graphicImage  height="20" width="20" alt="excel" value="#{expenseBean.str_Name}images/excel.jpg"/>
        <p:dataExporter type="xls" pageOnly="true"  target="DT" fileName="Expenses_Grid" />
    </h:commandLink>
       &#150; &#150; <h:commandLink id="pdf">
       <p:graphicImage  height="20" width="20" alt="pdf" value="#{expenseBean.str_Name}images/pdf.jpg"/>
        <p:dataExporter type="pdf" pageOnly="true"  target="DT" fileName="Expenses_Grid" />
    </h:commandLink>
 
    &#150; &#150;<h:commandLink id="csv">
       <p:graphicImage  height="20" width="20" alt="cvs" value="#{expenseBean.str_Name}images/cvs.png"/>
        <p:dataExporter type="csv"  pageOnly="true" target="DT" fileName="Expenses_Grid" />
    </h:commandLink>
 
   &#150; &#150; <h:commandLink id="xml">
       <p:graphicImage  height="20"  pageOnly="true" width="20" alt="xml" value="#{expenseBean.str_Name}images/xml.png"/>
        <p:dataExporter type="xml" pageOnly="true"  target="DT" fileName="Expenses_Grid" />
    </h:commandLink>
     
        </td>
        </tr>
        </table>
        
             <p:dataTable     selection="#{expenseBean1.selectedExpenses}" rowKey="#{Expenselist.str_ExpenseId}"
              id="DT"    
                 var="Expenselist" value="#{expenseBean1.expenseList}"   resizableColumns="true" style="width: 98%;margin-left: 1%;margin-right: 1%;margin-bottom:5px" 
              emptyMessage="No Records Found" paginatorAlwaysVisible="false"   rows="10"   paginator="true"  paginatorPosition="bottom" >
       <p:ajax  ajax="true" event="rowSelectCheckbox"   listener="#{expenseBean1.rowSelectListener}"  update=":form:btn,:form:btn1,:form:btn2"/>
        <p:ajax  ajax="true"  event="rowUnselectCheckbox"
				listener="#{expenseBean1.rowUnSelectListener}" update=":form:btn,:form:btn1,:form:btn2"/>
        <p:column      exportable="false"  selectionMode="multiple" style="width:35px;text-align:left">
        
          </p:column>
            <p:column  headerText="Account"  >
                 <p:outputLabel    value="#{Expenselist.str_AccountName}" /> 
                
            </p:column>
              <p:column   headerText="Type"  >
                <p:outputLabel    value="#{Expenselist.str_ExpenseType}" /> 
          
                
            </p:column>
             <p:column   headerText="ExpenseCat"  >
                <p:outputLabel    value="#{Expenselist.str_ExpenseCategory}" /> 
          
                
            </p:column>
             <p:column    headerText="Description" >
              <p:outputLabel    value="#{Expenselist.str_Description}" /> 
                
            </p:column>
            <p:column   headerText="AssetCat"  >
                <p:outputLabel    value="#{Expenselist.str_AssetCatType}" /> 
          
                
            </p:column>
             <p:column   headerText="Amount"  >
                <p:outputLabel    value="#{Expenselist.dbl_Ammount}" /> 
          
                
            </p:column>
             <p:column   headerText="Date"  >
                <p:outputLabel    value="#{Expenselist.date_Duration}" >
                 <f:convertDateTime pattern="dd-MMM-yyyy" />
                 </p:outputLabel> 
          
                
            </p:column>
             
             <p:column   headerText="Asset Name"  >
                <p:outputLabel    value="#{Expenselist.str_AssetName}" /> 
          
                
            </p:column>
             <p:column   headerText="Status"  >
                <p:outputLabel    value="#{Expenselist.str_Status}" /> 
          
                
            </p:column>
           
              
             </p:dataTable>
              <p:dialog header="Edit Expense" widgetVar="multiExpenseDialog"     showEffect="explode" hideEffect="bounce" resizable="false" height="550" width="400">
        <p:outputPanel id="multiExpenseDetail" style="text-align:center;">
          <ui:repeat value="#{expenseBean1.selectedExpenses}" var="ex">
           <table>
               
            
             <tr>
 <th>
    <p:outputLabel value="Organization Name:"/></th>
    <td>
    <p:inputText value="#{ex.str_OrganizationName}"/></td>  
    </tr>
  <tr>
 <th>
    <p:outputLabel value="AccountName:"/></th>
    <td>
    <h:selectOneMenu  valueChangeListener="#{expenseBean1.accountListener}" value="#{ex.str_AccountName}">
           <f:selectItems  value= "#{expenseBean1.str_AccountNameList}"  />
          </h:selectOneMenu>
     </td>  
    </tr>
     <tr>
 <th>
    <p:outputLabel value="ExpenseType:"/></th>
    <td>
    <p:inputText  readonly="true" value="#{ex.str_ExpenseType}"/></td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="ExpenseCategory:"/></th>
    <td>
    <h:selectOneMenu id="ExpenseCategory"    value="#{ex.str_ExpenseCategory}"  valueChangeListener="#{expenseBean1.expenseCategoryListener}"   >
                  
                   <f:selectItem itemLabel="Expense" itemValue="Expense"  />
                    
                 </h:selectOneMenu>
     </td>  
    </tr>
    
      <tr>
 <th>
    <p:outputLabel value="AssetCategoryType:"/></th>
    <td>
  <h:selectOneMenu id="assetcatname1"  value="#{ex.str_AssetCatType}" valueChangeListener="#{expenseBean1.assetCatNameListener}" >
                  
                   <f:selectItems  value="#{expenseBean1.str_AssetCatNameList}" />
                   <p:ajax event="change" update="assetname1" process="assetcatname1"/>
                 </h:selectOneMenu>
    </td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="AssetsName:"/></th>
    <td>
  <h:selectOneMenu  id="assetname1" value="#{ex.str_AssetName}"  valueChangeListener="#{expenseBean1.assetNameListener}" >
                  
                  <f:selectItems  value= "#{expenseBean1.str_AssetNameList}"  />
                  
                  
                 </h:selectOneMenu>
     </td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="Ammount:"/></th>
    <td>
    <p:inputText onkeyup="this.value=this.value.replace(/[^\d+\.$]/,'')" value="#{ex.dbl_Ammount}"/></td>  
    </tr>
       </table>
       <div>
       <hr/>
     <h:commandButton styleClass="btn" value="Update" action="#{expenseBean1.updateOneExpense(ex)}" /> 
     &#150; &#150; <h:commandButton value="Cancel"  styleClass="btn" onclick="history.go(0); return false;"/>
	   
    </div>
     
             </ui:repeat>
            
             </p:outputPanel>
             </p:dialog>
              <p:dialog header=" View Expense" widgetVar="multiExpenseDialog1"     showEffect="explode" hideEffect="bounce" resizable="false" height="550" width="400">
        <p:outputPanel id="multiExpenseDetail1" style="text-align:center;">
              <ui:repeat value="#{expenseBean1.selectedExpenses}" var="ex">
           <table>
               
            
             <tr>
 <th>
    <p:outputLabel value="Organization Name:"/></th>
    <td>
    <p:inputText readonly="true" value="#{ex.str_OrganizationName}"/></td>  
    </tr>
  <tr>
 <th>
    <p:outputLabel value="AccountName:"/></th>
    <td>
    <h:selectOneMenu  readonly="true" valueChangeListener="#{expenseBean1.accountListener}" value="#{ex.str_AccountName}">
           <f:selectItems  value= "#{expenseBean1.str_AccountNameList}"  />
          </h:selectOneMenu>
     </td>  
    </tr>
     <tr>
 <th>
    <p:outputLabel value="ExpenseType:"/></th>
    <td>
    <p:inputText  readonly="true" value="#{ex.str_ExpenseType}"/></td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="ExpenseCategory:"/></th>
    <td>
    <h:selectOneMenu id="ExpenseCategory"    value="#{ex.str_ExpenseCategory}"  valueChangeListener="#{expenseBean1.expenseCategoryListener}"   >
                  
                   <f:selectItem itemLabel="Expense" itemValue="Expense"  />
                    
                 </h:selectOneMenu>
     </td>  
    </tr>
    
      <tr>
 <th>
    <p:outputLabel value="AssetCategoryType:"/></th>
    <td>
  <h:selectOneMenu readonly="true" id="assetcatname1"  value="#{ex.str_AssetCatType}" valueChangeListener="#{expenseBean1.assetCatNameListener}" >
                   
                 
                   <f:selectItems  value="#{expenseBean1.str_AssetCatNameList}" />
                   <p:ajax event="change" update="assetname1" process="assetcatname1"/>
                 </h:selectOneMenu>
    </td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="AssetsName:"/></th>
    <td>
  <h:selectOneMenu  readonly="true" id="assetname1" value="#{ex.str_AssetName}"  valueChangeListener="#{expenseBean1.assetNameListener}" >
                  
                  <f:selectItems  value= "#{expenseBean1.str_AssetNameList}"  />
                  
                  
                 </h:selectOneMenu>
     </td>  
    </tr>
      <tr>
 <th>
    <p:outputLabel value="Ammount:"/></th>
    <td>
    <p:inputText readonly="true" value="#{ex.dbl_Ammount}"/></td>  
    </tr>
       </table>
    <div><hr/>
              <tr><td></td>
             <td> <h:commandButton value="Cancel"  styleClass="btn" onclick="history.go(0); return false;"/></td></tr>
             </div>
             </ui:repeat>
            </p:outputPanel>
            </p:dialog>
            </div>
            </h:form>
            <p:dialog header="Message" widgetVar="pDialog2"     showEffect="explode" hideEffect="bounce" resizable="false" height="200" width="300">
       <h:form id="sMsg">
        <p:outputPanel id="pd2" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{expenseBean1.selectedExpenses}"  var="sr1">
            
            <tr><th><p:outputLabel value="Approve Selected Item? Click yes to proceed."/></th></tr>
           <tr><td><p:selectBooleanCheckbox      value="#"/> <p:outputLabel value="Send Email to creator"/> </td></tr>
           <tr><td><p:selectBooleanCheckbox     value="#"/><p:outputLabel value="Send Email to creator"/></td></tr>
           <tr><td><h:commandButton value="yes"  update=":form:DT :form:ui-growl" styleClass="btn" action="#{expenseBean1.assignRequestedEstimate(sr1)}"/> 
           &#150; &#150; <h:commandButton value="No"  ajax="false" styleClass="btn" action="Expenses.xhtml">
           
           </h:commandButton></td>
           </tr>
            </ui:repeat>
            </table>
            </p:outputPanel>
            </h:form>
            </p:dialog>
             <p:dialog header="Message" widgetVar="pDialog3"     showEffect="explode" hideEffect="bounce" resizable="false" height="200" width="300">
       <h:form id="sMsg1">
        <p:outputPanel id="pd3" style="text-align:center;">
           <table>
              
            <ui:repeat value="#{expenseBean1.selectedExpenses}"  var="sr1">
            
            <tr><th><p:outputLabel value="Reject Selected Item? Click yes to proceed."/></th></tr>
           <tr><td><p:selectBooleanCheckbox      value="#"/> <p:outputLabel value="Send Email to creator"/> </td></tr>
           <tr><td><p:selectBooleanCheckbox     value="#"/><p:outputLabel value="Send Email to creator"/></td></tr>
           <tr><td><h:commandButton value="yes" styleClass="btn"  update=":form:DT :form:ui-growl"  action="#{expenseBean1.closeRequestedEstimate(sr1)}"/> 
           &#150; &#150; <h:commandButton value="No" styleClass="btn" action="Expenses.xhtml"/></td>
           </tr>
            </ui:repeat>
            </table>
            
            </p:outputPanel>
            </h:form>
            </p:dialog>
           
          </h:body>
            </ui:define>
            </ui:composition>